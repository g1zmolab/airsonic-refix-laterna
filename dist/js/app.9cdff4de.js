(function(){"use strict";var t={8029:function(t,e,a){var s=a(5471),r=a(5353),i=a(173),n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e(t.layout,{tag:"component"},[e("router-view")],1),e("ErrorToast")],1)},o=[],l=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.error?e("b-toast",{attrs:{visible:"",title:"Error",variant:"danger",solid:"","no-fade":"","no-auto-hide":""},on:{change:t.clearError}},[t.error?[e("strong",[t._v(t._s(t.error.message))]),e("div",[t._v(t._s(t.error.stack))])]:t._e()],2):t._e()},u=[],c=a(6032),d=a(3513);const p=(0,c.nY)("main",{state:()=>({isLoggedIn:!1,username:null,server:null,error:null,menuVisible:!1,artistAlbumSortOrder:(0,d.Mjh)("settings.artistAlbumSortOrder","desc")}),actions:{setError(t){this.error=t},clearError(){this.error=null},setLoginSuccess(t,e){this.isLoggedIn=!0,this.username=t,this.server=e},showMenu(){this.menuVisible=!0},hideMenu(){this.menuVisible=!1},toggleArtistAlbumSortOrder(){this.artistAlbumSortOrder="asc"===this.artistAlbumSortOrder?"desc":"asc"}}});var m=a(1737),h=(0,s.defineComponent)({components:{BToast:m.a},setup(){const t=p();return{error:(0,s.computed)((()=>t.error)),clearError:t.clearError}}}),f=h,y=a(1656),v=(0,y.A)(f,l,u,!1,null,null,null),g=v.exports,b=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"min-vh-100 d-flex"},[e("Sidebar"),e("main",{staticClass:"container-fluid py-2"},[e("TopNav"),t._t("default")],2)],1),e("Player")],1)},k=[],_=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"d-flex align-items-center mb-2"},[e("button",{staticClass:"navbar-toggler text-white d-md-none",on:{click:t.store.showMenu}},[e("Icon",{attrs:{icon:"nav"}})],1),e("div",{staticClass:"ml-auto"}),e("SearchForm"),t.store.username?[e("b-dropdown",{attrs:{variant:"link",right:"","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("Avatar",[e("Icon",{attrs:{icon:"person"}})],1)]},proxy:!0}],null,!1,2913106520)},[e("b-dropdown-text",[t._v(" "+t._s(t.store.username)+" ")]),e("b-dropdown-divider"),e("b-dropdown-item-button",{on:{click:function(e){t.showAboutModal=!0}}},[t._v(" About ")])],1)]:t._e(),e("About",{attrs:{visible:t.showAboutModal},on:{close:function(e){t.showAboutModal=!1}}})],2)},x=[],w=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("b-modal",{attrs:{size:"lg","hide-header":"","hide-footer":"",visible:t.visible},on:{change:function(e){return t.$emit("close")}}},[e("div",{staticClass:"mx-auto mb-3",staticStyle:{width:"200px"}},[e("Logo")],1),e("div",{staticClass:"m-2 small"},[e("p",[t._v(" Σε μία κοινωνία που τα πάντα αποτελούν εμπόρευμα, από τις πρώτες και βασικές μας ανάγκες μέχρι τις τελευταίες και πιο δευτερεύουσες επιθυμίες μας, κάθε αγαθό είτε υλίκο είτε άυλο έχει την τιμή του, όπως οι ραδιοσυχνότητες, ο ήχος και η μουσική. Έναντια, λοιπόν, σε αύτη την κατάσταση και ενώ η αυτοοργάνωση και η αντι-εμπορευματοποίηση διεκδικούν όλο και περισσότερο χώρο, επιχειρήσαμε να συμβάλλουμε στη διάδοσή τους και στο διαδίκτυο, απαλλοτριώνοντας κάτι ακόμα που μας ανήκει και γίνεται αντικείμενο εκμετάλλευσης, τη μουσική. Έχουμε, επομένως, την ανάγκη να δημιουργήσουμε μια πλατφόρμα, με πρόταγμα το αντιεμπορικό και το αυτοοργανωμένο, η οποία θα διανέμει ελεύθερα τη μουσική χωρίς την άμεση (ποσοστά) ή έμμεση (διαφημίσεις) εκμετάλλευση είτε του ακροατού είτε του δημιουργού. ")]),e("p",[t._v(" Αρχικά, ως ακροατά, μας λείπει να ακούμε μουσική ανενόχλητα,χωρίς διακοπές για διαφημίσεις, χωρίς δεδομένα κινητής και χωρίς να γεμίζουμε ιούς τις συσκευές μας με downloads. Παράλληλα, χωρίς να “νοικιάζουμε” τραγούδια πληρώνοντας premium σε μεγαλοεταιρίες που συνεχίζουν να πλουτίζουν καπηλευόμενες αφενός ξένες δημιουργίες και αφετέρου την ανάγκη μας για μουσική. Δε θέλουμε να μας αναγκάζουν –έστω και καταλάθος– να ακούμε είτε κομμάτια με κακοποιητικό λόγο είτε άτομα με ανάλογες συμπεριφορές απλώς επειδή πατήσαμε “τυχαία αναπαραγωγή“. ")]),e("p",[t._v(" Από την άλλη, ως δημιουργά έχουμε την ανάγκη να διανέμουμε τη μουσική μας δωρεάν σε όλα, δίνοντας ακόμη το ελεύθερο για επανεπεξεργασία και αναδημοσίευση. Δε θέλουμε να πλουτίζει κανείς από τις δικές μας δημιουργίες. Δε θέλουμε κανένας αριθμός, κανένα “like” και κανένα “share” να καθορίζουν την επιτυχία της μουσικής μας. ")]),e("p",[t._v(" Για όλους αυτούς τους λόγους δημιουργούμε τη “ΛΑΤΕΡΝΑ”. Μία πλατφόρμα όπου θα μπορούν δημιουργά να ανεβάζουν μουσικές κι ακροατά να ακούν ανενόχταμπλ , με ή χωρίς σύνδεση στο διαδίκτυο. ")]),e("p",[t._v(" Όσο η μουσική εμπορευματοποιείται, τόσο θα ανοίγουμε τα παράθυρα μας να ακούμε τη λατέρνα! ")]),e("p",[t._v(" Η πλατφόρμα είναι ανοιχτή να στείλεις τις δικές σου δημιουργίες, επικοινωνώντας με mail στο: radio@1431am.org με θέμα “λατέρνα”. ")]),e("p",[t._v(" Αντι-ιεραρχικά, χωρίς σεξιστικό και κακοποιητικό περιεχόμενο, πάντα αντιεξουσιαστικά ε;;; ")]),e("hr")]),e("div",{staticClass:"border-top my-3"}),e("div",{staticClass:"text-center"},[e("ExternalLink",{attrs:{href:t.url}},[t._v(" GitHub "),e("Icon",{attrs:{icon:"link"}})],1),e("p",[t._v(" Licensed under the AGPLv3 license. ")]),e("ExternalLink",{attrs:{href:t.url_gizmo}},[t._v(" Powered by gizmo_lab "),e("Icon",{attrs:{icon:"link"}})],1),e("div",{staticClass:"mt-4"},[e("div",[t._v("Server name: "+t._s(t.auth.serverInfo?.name))]),e("div",[t._v("OpenSubsonic: "+t._s(t.auth.serverInfo?.openSubsonic??!1))]),t.auth.serverInfo?.openSubsonic?e("div",[t._v(" OpenSubsonic extensions: "+t._s(t.auth.serverInfo?.extensions?.join(", "))+" ")]):t._e()])],1),e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.$emit("close")}}},[t._v(" Close ")])])])},C=[],A=function(){var t=this,e=t._self._c;return e("div",t._b({staticClass:"d-flex align-items-end logo-container",class:t.$data.staticClass||"",staticStyle:{height:"auto",display:"flex"}},"div",t.$data.attrs,!1),[e("img",{staticStyle:{height:"100px",width:"auto"},attrs:{src:"/laterna_logo.png",alt:"Logo"}})])},P=[],I={},S=(0,y.A)(I,A,P,!1,null,null,null),T=S.exports,$=a(2473),M=(a(6573),a(8100),a(7936),a(7467),a(4732),a(9577),a(4603),a(7566),a(8721),a(8664)),L=a.n(M);function q(){let t=new Uint8Array(16);window.crypto.getRandomValues(t);const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return t=t.map((t=>e.charCodeAt(t%e.length))),String.fromCharCode.apply(null,Array.from(t))}function R(t,e){void 0!==e&&([t[0],t[e]]=[t[e],t[0]]);const a=void 0!==e?1:0,s=t.length-1;for(let r=s;r>a;r--){const e=Math.floor(Math.random()*(r-a+1)+a);[t[r],t[e]]=[t[e],t[r]]}}function N(t,e){return t=[...t],R(t,e),t}function z(t){return L().hash(t)}function D(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==e[a].id)return!1;return!0}function B(t){return t.map((t=>t.name)).join(", ")}function E(t){const e=Object.entries(t).filter((([,t])=>void 0!==t)).map((([t,e])=>Array.isArray(e)?e.map((e=>[t,e])):[[t,e]])).flat();return new URLSearchParams(e).toString()}function F(t){if(!isFinite(t))return"∞";const e=Math.floor(t/60),a=Math.floor(t%60);return(e<10?"0":"")+e+":"+(a<10?"0":"")+a}const O=window.env,U={serverUrl:O?.SERVER_URL||""};var j=a(3122);class Q{constructor(){(0,$.A)(this,"server",""),(0,$.A)(this,"serverInfo",null),(0,$.A)(this,"username",""),(0,$.A)(this,"salt",""),(0,$.A)(this,"hash",""),(0,$.A)(this,"password",""),(0,$.A)(this,"authenticated",!1),this.server=U.serverUrl||localStorage.getItem("server")||"",this.username=localStorage.getItem("username")||"",this.salt=localStorage.getItem("salt")||"",this.hash=localStorage.getItem("hash")||"",this.password=localStorage.getItem("password")||""}saveSession(){U.serverUrl||localStorage.setItem("server",this.server),localStorage.setItem("username",this.username),localStorage.setItem("salt",this.salt),localStorage.setItem("hash",this.hash),localStorage.setItem("password",this.password)}async autoLogin(){if(!this.server||!this.username)return!1;try{const t={salt:this.salt,hash:this.hash,password:this.password};return await V(this.server,this.username,t),this.authenticated=!0,this.serverInfo=await H(this.server,this.username,t),!0}catch{return!1}}async loginWithPassword(t,e,a){const s=q(),r=z(a+s);try{await V(t,e,{hash:r,salt:s}),this.salt=s,this.hash=r,this.password=""}catch{await V(t,e,{password:a}),this.salt="",this.hash="",this.password=a}this.server=t,this.username=e,this.authenticated=!0,this.serverInfo=await H(t,e,{hash:r,salt:s,password:a}),this.saveSession()}get urlParams(){return E((0,j.A)({u:this.username,s:this.salt,t:this.hash,p:this.password}))}logout(){localStorage.clear(),sessionStorage.clear()}isAuthenticated(){return this.authenticated}}async function V(t,e,a){const s=E((0,j.A)({s:a.salt,t:a.hash,p:a.password},(t=>void 0!==t))),r=`${t}/rest/ping?u=${e}&${s}&v=1.15.0&c=app&f=json`;return fetch(r).then((t=>t.ok?t.json():Promise.reject(new Error(t.statusText)))).then((t=>{const e=t["subsonic-response"];if(!e||"ok"!==e.status){const t=e.error?.message||e.status;throw new Error(t)}}))}async function H(t,e,a){const s=E((0,j.A)({s:a.salt,t:a.hash,p:a.password},(t=>void 0!==t))),r=`${t}/rest/getOpenSubsonicExtensions?u=${e}&${s}&v=1.15.0&c=app&f=json`,i=await fetch(r);if(i.ok){const t=await i.json(),e=t["subsonic-response"];if("ok"===e?.status)return{name:e.type,version:e.version,openSubsonic:!0,extensions:e.openSubsonicExtensions.map((t=>t.name))}}return{name:"Subsonic",version:"Unknown",openSubsonic:!1,extensions:[]}}const G=Symbol("");function Y(){return(0,s.inject)(G)}function Z(){const t=new Q;return Object.assign(t,{install:e=>{e.provide(G,t)}})}var W=(0,s.defineComponent)({components:{Logo:T},props:{visible:{type:Boolean,required:!0}},setup(){return{auth:Y()}},computed:{build:()=>({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BUILD),buildDate:()=>({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_BUILD_DATE),url:()=>"https://github.com/g1zmolab/airsonic-refix-laterna",url_gizmo:()=>"https://gizmolab.net/"}}),X=W,J=(0,y.A)(X,w,C,!1,null,null,null),K=J.exports,tt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("form",{staticClass:"form-inline my-2 my-lg-0",on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control mr-sm-2",attrs:{type:"search",placeholder:"Search"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})])])},et=[],at=(a(4114),(0,s.defineComponent)({data(){return{query:""}},methods:{search(){this.$router.push({name:"search",query:{q:this.query}})}}})),st=at,rt=(0,y.A)(st,tt,et,!1,null,null,null),it=rt.exports,nt=(0,s.defineComponent)({components:{About:K,SearchForm:it},setup(){return{store:p(),auth:Y()}},data(){return{showAboutModal:!1}},methods:{scan(){return this.$api.scan()},logout(){this.auth.logout(),this.$router.go(0)}}}),ot=nt,lt=(0,y.A)(ot,_,x,!1,null,null,null),ut=lt.exports,ct=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"sidebar-container elevated"},[e("div",{staticClass:"sidebar-fixed d-none d-md-block"},[e("SidebarNav"),t._m(0)],1),e("b-sidebar",{staticClass:"d-md-none",attrs:{visible:t.store.menuVisible,"sidebar-class":"elevated","bg-variant":"",shadow:"lg","no-header":"",backdrop:"","backdrop-variant":""},on:{hidden:t.store.hideMenu}},[e("SidebarNav")],1)],1)},dt=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"sidebar-footer p-3 text-center"},[e("a",{attrs:{href:"https://gizmolab.net/",target:"_blank",rel:"noopener noreferrer"}},[e("img",{staticClass:"footer-logo",attrs:{src:a(6373),alt:"gizmo_lab Logo"}})])])}],pt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("nav",{staticClass:"nav flex-column"},[e("div",{staticClass:"sidebar-brand d-flex justify-content-between align-items-end"},[e("Logo"),e("button",{staticClass:"btn btn-link btn-lg p-0 m-0 d-md-none",on:{click:t.store.hideMenu}},[e("Icon",{attrs:{icon:"x"}})],1)],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"home"},exact:""}},[e("Icon",{attrs:{icon:"discover"}}),t._v(" Discover ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"queue"}}},[e("Icon",{attrs:{icon:"playlist"}}),t._v(" Playing ")],1),e("small",{staticClass:"sidebar-heading text-muted"},[t._v(" Library ")]),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"albums-default"}}},[e("Icon",{attrs:{icon:"library"}}),t._v(" Albums ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"artists"}}},[e("Icon",{attrs:{icon:"library"}}),t._v(" Artists ")],1),e("router-link",{staticClass:"nav-item nav-link",attrs:{to:{name:"genres"}}},[e("Icon",{attrs:{icon:"library"}}),t._v(" Genres ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"playlists"}}},[e("Icon",{attrs:{icon:"list"}}),t._v(" Playlists ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"favourites"}}},[e("Icon",{attrs:{icon:"heart"}}),t._v(" Favourites ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"podcasts"}}},[e("Icon",{attrs:{icon:"podcast"}}),t._v(" Podcasts ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"radio"}}},[e("Icon",{attrs:{icon:"radio"}}),t._v(" Radio ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"files"}}},[e("Icon",{attrs:{icon:"files"}}),t._v(" Files ")],1),e("PlaylistNav")],1)},mt=[],ht=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mw-100"},[e("small",{staticClass:"sidebar-heading text-muted"},[t._v(" Playlists "),e("button",{staticClass:"btn btn-link btn-sm p-0 float-right",attrs:{type:"button"},on:{click:function(e){t.showAddModal=!0}}},[e("Icon",{attrs:{icon:"plus"}})],1),e("CreatePlaylistModal",{attrs:{visible:t.showAddModal},on:{"update:visible":function(e){t.showAddModal=e}}})],1),e("router-link",{staticClass:"nav-link",attrs:{to:{name:"playlist",params:{id:"random"}}}},[e("Icon",{staticClass:"mr-2",attrs:{icon:"playlist"}}),t._v(" Random ")],1),t.playlists?t._l(t.playlists,(function(a){return e("router-link",{key:a.id,staticClass:"nav-link",attrs:{to:{name:"playlist",params:{id:a.id}}}},[e("span",{on:{dragover:t.onDragover,drop:function(e){return t.onDrop(a.id,e)}}},[e("Icon",{staticClass:"mr-2",attrs:{icon:"playlist"}}),t._v(" "+t._s(a.name)+" ")],1)])})):t._e()],2)},ft=[],yt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("b-modal",{attrs:{visible:t.visible},on:{ok:t.confirm,change:t.change},scopedSlots:t._u([{key:"modal-header-close",fn:function(){return[e("Icon",{attrs:{icon:"x"}})]},proxy:!0},{key:"modal-title",fn:function(){return[t._v(" New playlist ")]},proxy:!0},{key:"modal-ok",fn:function(){return[t._v(" Create ")]},proxy:!0}])},[e("div",{staticClass:"form-group"},[e("label",[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])])},vt=[],gt=a(1268);const bt=(0,c.nY)("playlist",{state:()=>({playlists:null}),actions:{load(){return this.api.getPlaylists().then((t=>{this.playlists=(0,gt.A)(t,"createdAt")}))},create(t){return this.api.createPlaylist(t).then((t=>{this.playlists=(0,gt.A)(t,"createdAt")}))},async update({id:t,name:e,comment:a,isPublic:s}){const r=this.playlists?.find((e=>e.id===t));r&&(r.name=e,r.comment=a,r.isPublic=s,await this.api.editPlaylist(t,e,a,s))},async addTracks(t,e){const a=this.playlists?.find((e=>e.id===t));a&&(await this.api.addToPlaylist(t,e),a.updatedAt=(new Date).toISOString(),a.trackCount=(a?.trackCount||0)+e.length)},async removeTrack(t,e){const a=this.playlists?.find((e=>e.id===t));a&&(await this.api.removeFromPlaylist(t,e),a.updatedAt=(new Date).toISOString(),a.trackCount=(a?.trackCount||0)-1)},async delete(t){await this.api.deletePlaylist(t),this.playlists=this.playlists.filter((e=>e.id!==t))}}});var kt=(0,s.defineComponent)({props:{visible:{type:Boolean,required:!0}},setup(t,{emit:e}){const a=(0,s.ref)(""),r=bt();return{name:a,confirm:()=>{r.create(a.value)},change:()=>{a.value="",e("update:visible",!1)}}}}),_t=kt,xt=(0,y.A)(_t,yt,vt,!1,null,null,null),wt=xt.exports,Ct=(0,s.defineComponent)({components:{CreatePlaylistModal:wt},setup(){const t=bt(),e=(0,s.computed)((()=>t.playlists?.slice(0,10)));return{playlists:e,addTracks:t.addTracks}},data(){return{playlistName:"",showAddModal:!1}},methods:{async onDrop(t,e){e.preventDefault();const a=e.dataTransfer.getData("application/x-track-id");if(a)return this.addTracks(t,[a]);const s=e.dataTransfer.getData("application/x-album-id");if(s){const e=await this.$api.getAlbumDetails(s);return this.addTracks(t,e.tracks.map((t=>t.id)))}},onDragover(t){(t.dataTransfer?.types.includes("application/x-track-id")||t.dataTransfer?.types.includes("application/x-album-id"))&&(t.dataTransfer.dropEffect="copy",t.preventDefault())}}}),At=Ct,Pt=(0,y.A)(At,ht,ft,!1,null,null,null),It=Pt.exports,St=(0,s.defineComponent)({components:{Logo:T,PlaylistNav:It},setup(){return{store:p()}}}),Tt=St,$t=(0,y.A)(Tt,pt,mt,!1,null,null,null),Mt=$t.exports,Lt=a(7180),qt=(0,s.defineComponent)({components:{BSidebar:Lt.X,SidebarNav:Mt},setup(){return{store:p()}}}),Rt=qt,Nt=(0,y.A)(Rt,ct,dt,!1,null,null,null),zt=Nt.exports,Dt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"player elevated d-flex",class:{visible:t.track}},[e("div",{staticClass:"flex-fill"},[t.track?e("ProgressBar",{staticStyle:{"margin-bottom":"-5px","margin-top":"-9px"}}):t._e(),e("div",{staticClass:"row align-items-center m-0",staticStyle:{"padding-top":"-10px"}},[e("div",{staticClass:"col p-0 d-flex flex-nowrap align-items-center justify-content-start",staticStyle:{width:"0","min-width":"0"}},[t.track?[e("router-link",{staticStyle:{padding:"12px"},attrs:{to:{name:"queue"}}},[t.track.image?e("img",{attrs:{width:"52",height:"52",src:t.track.image}}):e("img",{attrs:{width:"52",height:"52",src:a(6910)}})]),e("div",{staticStyle:{"min-width":"0"}},[e("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.streamTitle||t.track.title)+" ")]),e("div",{staticClass:"text-truncate text-muted"},[t._v(" "+t._s(t.formatArtists(t.track.artists||[])||t.track.album)+" ")])])]:t._e()],2),e("div",{staticClass:"col-auto p-0"},[e("b-button",{staticClass:"m-2 d-none d-sm-inline-block",attrs:{variant:"link"},on:{click:t.previous}},[e("Icon",{attrs:{icon:"skip-start"}})],1),e("b-button",{staticClass:"m-2",attrs:{variant:"link",size:"lg"},on:{click:t.playPause}},[e("Icon",{attrs:{icon:t.isPlaying?"pause":"play"}})],1),e("b-button",{staticClass:"m-2",attrs:{variant:"link"},on:{click:t.next}},[e("Icon",{attrs:{icon:"skip-end"}})],1)],1),e("div",{staticClass:"col-auto col-sm p-0"},[e("div",{staticClass:"d-flex flex-nowrap justify-content-end pr-3"},[e("div",{staticClass:"m-0 d-none d-md-inline-flex align-items-center"},[t.track&&t.track.isPodcast?[e("b-button",{staticClass:"mb-1",attrs:{id:"player-playback-rate-btn",variant:"icon",title:"Speed"}},[t._v(" "+t._s(t.playbackRate)+"x ")]),e("b-popover",{attrs:{target:"player-playback-rate-btn",placement:"top",triggers:"click blur","no-fade":""}},[e("Slider",{staticClass:"pt-2",staticStyle:{height:"120px"},attrs:{direction:"btt",min:.8,max:2,step:.1,value:t.playbackRate},on:{input:t.setPlaybackRate}})],1)]:t._e(),e("b-button",{staticClass:"m-0",attrs:{title:"Favourite",variant:"link",disabled:t.track&&t.track.isStream},on:{click:t.toggleFavourite}},[e("Icon",{attrs:{icon:t.isFavourite?"heart-fill":"heart"}})],1),e("b-button",{attrs:{id:"player-volume-btn",variant:"link",title:"Volume"}},[e("Icon",{attrs:{icon:t.isMuted?"mute":"volume"}})],1),e("b-popover",{attrs:{target:"player-volume-btn",placement:"top",triggers:"click blur","no-fade":""}},[e("Slider",{staticClass:"pt-2",staticStyle:{height:"120px"},attrs:{direction:"btt",min:0,max:1,step:.01,percent:"",value:t.volume},on:{input:t.setVolume}})],1),e("b-button",{staticClass:"m-0",class:{"text-primary":t.shuffleActive},attrs:{title:"Shuffle",variant:"link"},on:{click:t.toggleShuffle}},[e("Icon",{attrs:{icon:"shuffle"}})],1),e("b-button",{staticClass:"m-0",class:{"text-primary":t.repeatActive},attrs:{title:"Repeat",variant:"link"},on:{click:t.toggleRepeat}},[e("Icon",{attrs:{icon:"repeat"}})],1)],2),e("OverflowMenu",{staticClass:"d-md-none"},[e("b-dropdown-text",[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("strong",[t._v("Volume")]),e("Slider",{staticClass:"px-3",staticStyle:{width:"120px"},attrs:{min:0,max:1,step:.01,percent:"",value:t.volume},on:{input:t.setVolume}})],1)]),t.track&&t.track.isPodcast?e("b-dropdown-text",[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("strong",[t._v("Speed")]),e("Slider",{staticClass:"px-3",staticStyle:{width:"120px"},attrs:{min:.7,max:2,step:.1,value:t.playbackRate},on:{input:t.setPlaybackRate}})],1)]):t._e(),e("b-dropdown-text",[e("div",{staticClass:"d-flex justify-content-between"},[e("strong",[t._v("Repeat")]),e("SwitchInput",{attrs:{value:t.repeatActive},on:{input:t.toggleRepeat}})],1)]),e("b-dropdown-text",[e("div",{staticClass:"d-flex justify-content-between"},[e("strong",[t._v("Shuffle")]),e("SwitchInput",{attrs:{value:t.shuffleActive},on:{input:t.toggleShuffle}})],1)]),e("b-dropdown-text",[e("div",{staticClass:"d-flex justify-content-between"},[e("strong",[t._v("Favourite")]),e("b-button",{staticClass:"m-0 px-2 py-0",attrs:{variant:"link"},on:{click:function(e){return e.stopPropagation(),t.toggleFavourite.apply(null,arguments)}}},[e("Icon",{attrs:{icon:t.isFavourite?"heart-fill":"heart"}})],1)],1)])],1)],1)])])],1)])},Bt=[],Et=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("VueSlider",t._b({attrs:{value:t.progress,min:0,max:1,interval:1e-5,lazy:!0,contained:!0,"dot-options":{tooltip:"always"},"tooltip-formatter":t.formatter},on:{change:t.seek}},"VueSlider",t.$attrs,!1))},Ft=[],Ot=a(378),Ut=a.n(Ot),jt=(0,s.defineComponent)({components:{VueSlider:Ut()},computed:{progress(){return this.$store.getters["player/progress"]}},methods:{formatter(t){const e=this.$store.state.player.duration,a=t*e;return`${F(a)} / ${F(e)}`},seek(t){this.$store.dispatch("player/seek",t)}}}),Qt=jt,Vt=(0,y.A)(Qt,Et,Ft,!1,null,"4366e4e6",null),Ht=Vt.exports;const Gt=(0,c.nY)("favourite",{state:()=>({albums:{},artists:{},tracks:{}}),actions:{load(){return this.api.getFavourites().then((t=>{this.albums=Yt(t.albums),this.artists=Yt(t.artists),this.tracks=Yt(t.tracks)}))},toggle(t,e){const a=Zt(t);return this[a][e]?(s["default"].delete(this[a],e),this.api.removeFavourite(e,t)):(s["default"].set(this[a],e,!0),this.api.addFavourite(e,t))}}});function Yt(t){return Object.assign({},...t.map((t=>({[t.id]:!0}))))}function Zt(t){switch(t){case"album":return"albums";case"artist":return"artists";case"track":return"tracks";default:throw new Error(`unknown favourite type '${t}'`)}}var Wt=a(5840),Xt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"custom-control custom-switch"},[e("input",{staticClass:"custom-control-input",attrs:{id:t.id,type:"checkbox"},domProps:{checked:t.value},on:{change:function(e){return t.$emit("input",e.target.checked)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:t.id}})])},Jt=[],Kt=a(5664),te=(0,s.defineComponent)({props:{value:{type:Boolean,default:!1}},computed:{id(){return(0,Kt.A)("switch-")}}}),ee=te,ae=(0,y.A)(ee,Xt,Jt,!1,null,null,null),se=ae.exports,re=(0,s.defineComponent)({components:{SwitchInput:se,BPopover:Wt.u,ProgressBar:Ht},setup(){return{favouriteStore:Gt()}},computed:{isPlaying(){return this.$store.state.player.isPlaying},volume(){return this.$store.state.player.volume},isMuted(){return this.$store.state.player.volume<=0},repeatActive(){return this.$store.state.player.repeat},shuffleActive(){return this.$store.state.player.shuffle},playbackRate(){return this.$store.getters["player/playbackRate"]},isFavourite(){return this.track&&!!this.favouriteStore.tracks[this.track.id]},track(){return this.$store.getters["player/track"]},streamTitle(){return this.$store.state.streamTitle},documentTitle(){return[this.streamTitle||this.track?.title,B(this.track?.artists||[])||this.track?.album,"Λατέρνα | 1431AM"].filter((t=>!!t)).join(" • ")}},watch:{documentTitle:{immediate:!0,handler(t){document.title=t}}},methods:{playPause(){return this.$store.dispatch("player/playPause")},next(){return this.$store.dispatch("player/next")},previous(){return this.$store.dispatch("player/previous")},setVolume(t){return this.$store.dispatch("player/setVolume",parseFloat(t))},setPlaybackRate(t){return this.$store.dispatch("player/setPlaybackRate",t)},toggleRepeat(){return this.$store.dispatch("player/toggleRepeat")},toggleShuffle(){return this.$store.dispatch("player/toggleShuffle")},toggleFavourite(){return this.favouriteStore.toggle("track",this.track.id)},formatArtists:B}}),ie=re,ne=(0,y.A)(ie,Dt,Bt,!1,null,"7f467331",null),oe=ne.exports,le=(0,s.defineComponent)({components:{TopNav:ut,Sidebar:zt,Player:oe}}),ue=le,ce=(0,y.A)(ue,b,k,!1,null,null,null),de=ce.exports,pe=function(){var t=this,e=t._self._c;return e("main",{staticClass:"container-fluid"},[t._t("default")],2)},me=[],he={},fe=(0,y.A)(he,pe,me,!1,null,null,null),ye=fe.exports,ve=(0,s.defineComponent)({components:{ErrorToast:g,Default:de,Fullscreen:ye},computed:{layout(){return this.$route.meta.layout||"Default"}}}),ge=ve,be=(0,y.A)(ge,n,o,!1,null,null,null),ke=be.exports;const _e=(t,e)=>{const a={};let r;return{use(t,e){return t.install(this,e),this},config:Object.assign(s["default"].config,{globalProperties:s["default"].prototype}),component:s["default"].component.bind(s["default"]),provide(t,e){return a[t]=e,this},mount:(i,n)=>(r||(r=new s["default"]({...e,provide:a,render:e=>e(t)}),r.$mount(i,n)),r)}};var xe=function(t,e){return t("span",{staticClass:"bg-secondary text-white rounded-circle avatar"},[e._t("default")],2)},we=[],Ce={},Ae=(0,y.A)(Ce,xe,we,!0,null,"22f79810",null),Pe=Ae.exports,Ie=function(t,e){return t("div",[e.props.loading?t("div",{staticClass:"d-flex justify-content-center"},[t("span",{staticClass:"spinner-border"})]):e._t("default")],2)},Se=[],Te={},$e=(0,y.A)(Te,Ie,Se,!0,null,null,null),Me=$e.exports,Le=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{on:{contextmenu:t.showContextMenu}},[t._t("default"),t.$slots["context-menu"]?e("b-dropdown",{ref:"dropdown",style:{position:"absolute",left:`${t.left}px`,top:`${t.top}px`},attrs:{"toggle-class":"p-0 border-0","no-caret":"",lazy:""},on:{hide:t.hide}},[t._t("context-menu")],2):t._e()],2)},qe=[],Re=(0,s.defineComponent)({data(){return{top:0,left:0,visible:!1}},watch:{visible:{handler(t){s["default"].set(this.$refs.dropdown,"visible",t)}}},methods:{hide(t){t.preventDefault(),this.visible=!1},showContextMenu(t){this.$slots["context-menu"]&&(t.preventDefault(),this.top=t.offsetY,this.left=t.offsetX,this.visible=!0)}}}),Ne=Re,ze=(0,y.A)(Ne,Le,qe,!1,null,null,null),De=ze.exports,Be=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("BDropdownItemButton",t._g({attrs:{disabled:t.disabled,"button-class":["d-flex justify-content-between text-nowrap",{[`text-${t.variant}`]:t.variant}]}},t.$listeners),[t._t("default",(function(){return[t._v(" "+t._s(t.text)+" ")]})),t.icon?e("Icon",{staticClass:"ml-4",attrs:{icon:t.icon}}):t._e()],2)},Ee=[],Fe=(0,s.defineComponent)({props:{text:{type:String,default:""},icon:{type:String,default:null},variant:{type:String,default:""},disabled:{type:Boolean,default:!1}}}),Oe=Fe,Ue=(0,y.A)(Oe,Be,Ee,!1,null,null,null),je=Ue.exports,Qe=function(t,e){return t("div",{staticClass:"d-flex flex-column align-items-center pt-5"},[t("Icon",{staticClass:"empty-icon",attrs:{icon:"stack"}}),t("div",{staticClass:"mt-4 text-muted"},[e._t("default",(function(){return[e._v(" "+e._s(e.props.label||"Empty")+" ")]}))],2)],1)},Ve=[],He={},Ge=(0,y.A)(He,Qe,Ve,!0,null,"6045f03b",null),Ye=Ge.exports,Ze=function(t,e){return t("a",e._b({class:[e.data.class,e.data.staticClass],attrs:{href:e.props.href,target:"_blank",rel:"noopener noreferrer"}},"a",e.data.attrs,!1),[e._t("default")],2)},We=[],Xe={},Je=(0,y.A)(Xe,Ze,We,!0,null,null,null),Ke=Je.exports,ta=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"d-flex flex-column flex-md-row align-items-center align-items-md-start position-relative mb-3"},[e("div",{staticClass:"backdrop"}),t.image?e("img",{attrs:{src:t.image}}):e("img",{attrs:{src:a(6910)}}),e("div",{staticClass:"body d-flex flex-column align-items-center align-items-md-start pt-4 pt-md-0 pl-md-4 pb-1 text-center text-md-left"},[t._t("default")],2)])},ea=[],aa=a(6910);const sa=(0,s.defineComponent)({props:{image:{type:String,default:null}},computed:{backgroundImage(){return`url('${this.image||aa}')`}}}),ra=()=>{(0,s.useCssVars)(((t,e)=>({"0579082b":t.backgroundImage})))},ia=sa.setup;sa.setup=ia?(t,e)=>(ra(),ia(t,e)):ra;var na=sa,oa=na,la=(0,y.A)(oa,ta,ea,!1,null,"5c56f22c",null),ua=la.exports,ca=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("svg",t._b({staticClass:"bi icon",attrs:{xmlns:"http://www.w3.org/2000/svg",role:"img",focusable:"false","aria-hidden":"true",width:"1em",height:"1em",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 16 16"},domProps:{innerHTML:t._s(t.path)}},"svg",t.$attrs,!1))},da=[],pa=a(626),ma=a(9266),ha=a(2802),fa=a(8235),ya=a(9232),va=a(4197),ga=a(1814),ba=a(1888),ka=a(8406),_a=a(9818),xa=a(8796),wa=a(6234),Ca=a(6956),Aa=a(3234),Pa=a(7004),Ia=a(6904),Sa=a(5959),Ta=a(8482),$a=a(5423),Ma=a(9968),La=a(3294),qa=a(4673),Ra=a(5038),Na=a(7539),za=a(5863),Da=a(113),Ba=a(6638),Ea=a(9090),Fa=a(6150),Oa=a(2150),Ua=a(134);const ja={"arrow-up-down":pa.A.body,check:ma.A.body,"chevron-right":ha.A.body,discover:fa.A.body,download:ya.A.body,edit:va.A.body,files:ga.A.body,folder:ba.A.body,heart:ka.A.body,"heart-fill":_a.A.body,library:xa.A.body,link:wa.A.body,list:Ca.A.body,mute:Aa.A.body,nav:Pa.A.body,pause:Ia.A.body,person:Sa.A.body,play:Ta.A.body,playlist:$a.A.body,plus:Ma.A.body,podcast:La.A.body,radio:qa.A.body,refresh:Ra.A.body,repeat:Na.A.body,shuffle:za.A.body,"skip-end":Da.A.body,"skip-start":Ba.A.body,stack:Ea.A.body,"three-dots-vertical":Fa.A.body,volume:Oa.A.body,x:Ua.A.body};var Qa=(0,s.defineComponent)({props:{icon:{type:String,required:!0}},computed:{path(){return this.icon in ja?ja[this.icon]:(console.warn(`Unknown icon '${this.icon}'`),"")}}}),Va=Qa,Ha=(0,y.A)(Va,ca,da,!1,null,null,null),Ga=Ha.exports,Ya=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("infinite-loading",{ref:"inf",attrs:{"force-use-infinite-wrapper":""},on:{infinite:t.loadMore}},[e("template",{slot:"spinner"},[e("div",{staticClass:"d-flex justify-content-center my-4"},[e("span",{staticClass:"spinner-border"})])]),e("template",{slot:"no-more"},[e("span")]),e("template",{slot:"no-results"},[e("span")])],2)},Za=[],Wa=a(2252),Xa=a.n(Wa),Ja=(0,s.defineComponent)({components:{InfiniteLoading:Xa()},props:{loading:{type:Boolean,required:!0},hasMore:{type:Boolean,required:!0}},watch:{loading:{handler(t){this.hasMore?t||this.$refs.inf.stateChanger.loaded():this.$refs.inf.stateChanger.complete()}},hasMore:{handler(t){t||this.$refs.inf.stateChanger.complete()}}},methods:{loadMore(){this.$emit("load-more")}}}),Ka=Ja,ts=(0,y.A)(Ka,Ya,Za,!1,null,null,null),es=ts.exports,as=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("b-dropdown",{attrs:{"no-caret":"",boundary:"window",variant:t.variant,"toggle-class":"link"===t.variant?"p-0":"px-1",disabled:t.disabled,lazy:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("Icon",{attrs:{icon:"three-dots-vertical"}})]},proxy:!0}])},[t._t("default")],2)},ss=[],rs=(0,s.defineComponent)({props:{disabled:{type:Boolean,default:!1},variant:{type:String,default:"link"}}}),is=rs,ns=(0,y.A)(is,as,ss,!1,null,null,null),os=ns.exports,ls=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("VueSlider",t._b({attrs:{value:t.value,min:t.min,max:t.max,interval:t.step,"tooltip-formatter":t.formatter},on:{change:t.onInput}},"VueSlider",t.$attrs,!1))},us=[],cs=(0,s.defineComponent)({components:{VueSlider:Ut()},props:{value:{type:Number,required:!0},min:{type:Number,required:!0},max:{type:Number,required:!0},step:{type:Number,required:!0},percent:{type:Boolean,default:!1}},methods:{onInput(t){this.$emit("input",t)},formatter(t){return this.percent?`${Math.round(100*(t-this.min)/(this.max-this.min))}%`:`${t}`}}}),ds=cs,ps=(0,y.A)(ds,ls,us,!1,null,"1a7198d4",null),ms=ps.exports,hs=function(t,e){return t("div",{class:["tiles",e.props.square?"tiles-square":"tiles-rect",{"tiles-hs":e.props.allowHScroll}]},[e._t("default")],2)},fs=[],ys=(0,s.defineComponent)({props:{square:{type:Boolean,default:!1},allowHScroll:{type:Boolean,default:!1}}}),vs=ys,gs=(0,y.A)(vs,hs,fs,!0,null,null,null),bs=gs.exports,ks=function(t,e){return t("div",e._g(e._b({staticClass:"tile card"},"div",e.data.attrs,!1),e.data.on),[t("ContextMenu",{staticClass:"tile-img",scopedSlots:e._u([{key:"context-menu",fn:function(){return[e._t("context-menu")]},proxy:!0}],null,!0)},[t("router-link",{attrs:{to:e.props.to}},[e.props.image?t("img",{attrs:{src:e.props.image}}):t("img",{attrs:{src:a(6910)}})])],1),t("div",{staticClass:"card-body"},[t("div",{staticClass:"text-truncate font-weight-bold"},[e._t("title",(function(){return[t("router-link",{attrs:{to:e.props.to}},[e._v(" "+e._s(e.props.title)+" ")])]}))],2),t("div",{staticClass:"text-truncate text-muted"},[e._t("text",(function(){return[e._v(" "+e._s(e.props.text)+" ")]}))],2)])],1)},_s=[],xs={},ws=(0,y.A)(xs,ks,_s,!0,null,null,null),Cs=ws.exports,As=a(5532),Ps=a(5378),Is=a(934),Ss=a(9656),Ts=a(2493),$s=a(3488),Ms=a(6917);const Ls={Avatar:Pe,BButton:As.P,BDropdown:Ps.U,BDropdownDivider:Is.f,BDropdownItem:Ss.H,BDropdownItemButton:Ts.N,BDropdownText:$s.P,BModal:Ms.i,ContentLoader:Me,ContextMenu:De,ContextMenuItem:je,EmptyIndicator:Ye,ExternalLink:Ke,Hero:ua,Icon:Ga,InfiniteLoader:es,OverflowMenu:os,Slider:ms,Tiles:bs,Tile:Cs};var qs=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"row align-items-center h-100 mt-5"},[t.displayForm?e("div",{staticClass:"mx-auto card",staticStyle:{width:"22rem"}},[e("b-overlay",{attrs:{rounded:"",show:t.busy,opacity:"0.1"}},[e("div",{staticClass:"card-body"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{staticClass:"d-flex mb-2"},[e("Logo",{staticClass:"mx-auto"})],1),t.config.serverUrl?t._e():e("div",{staticClass:"form-group"},[e("label",[t._v("Server")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.server,expression:"server"}],staticClass:"form-control",class:{"is-invalid":t.hasError},attrs:{name:"server",type:"text"},domProps:{value:t.server},on:{input:function(e){e.target.composing||(t.server=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",class:{"is-invalid":t.hasError},attrs:{name:"username",type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:{"is-invalid":t.hasError},attrs:{name:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),null!=t.error?e("div",{staticClass:"alert alert-danger"},[t._v(" Could not log in. ("+t._s(t.error.message)+") ")]):t._e(),e("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:t.busy},on:{click:t.login}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"spinner-border spinner-border-sm"}),t._v(" Log in ")])])])])],1):e("div",{staticClass:"mx-auto"},[e("span",{staticClass:"spinner-border"})])])},Rs=[],Ns=a(7228),zs=(0,s.defineComponent)({components:{BOverlay:Ns.n,Logo:T},props:{returnTo:{type:String,required:!0}},setup(){return{store:p(),auth:Y()}},data(){return{server:"",username:"",password:"",busy:!1,error:null,displayForm:!1}},computed:{hasError(){return null!==this.error},config:()=>U},async created(){this.server=this.auth.server,this.username=this.auth.username;const t=await this.auth.autoLogin();t?(this.store.setLoginSuccess(this.username,this.server),await this.$router.replace(this.returnTo)):this.displayForm=!0},methods:{login(){this.error=null,this.busy=!0,this.auth.loginWithPassword(this.server,this.username,this.password).then((()=>{this.store.setLoginSuccess(this.username,this.server),this.$router.replace(this.returnTo)})).catch((t=>{this.error=t})).finally((()=>{this.busy=!1}))}}}),Ds=zs,Bs=(0,y.A)(Ds,qs,Rs,!1,null,null,null),Es=Bs.exports,Fs=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[e("h1",{staticClass:"mb-0"},[t._v(" Playing ")]),e("div",[e("b-button",{staticClass:"mr-2",attrs:{variant:"link",disabled:!t.tracks?.length},on:{click:t.shuffle}},[e("Icon",{attrs:{icon:"shuffle"}}),t._v(" Shuffle ")],1),e("b-button",{staticClass:"clear-btn",attrs:{variant:"link",disabled:!t.tracks?.length},on:{click:t.clear}},[e("Icon",{attrs:{icon:"x"}}),t._v(" Clear "),1===t.tracks?.length?e("div",{staticClass:"tooltip bs-tooltip-bottom"},[e("div",{staticClass:"tooltip-inner"},[t._v(" Click again to clear current track ")])]):t._e()],1)],1)]),e("ContentLoader",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"default",fn:function(){return[t.tracks.length>0?e("BaseTable",[e("BaseTableHead",[e("th",{staticClass:"text-left d-none d-lg-table-cell"},[t._v(" Artist ")]),e("th",{staticClass:"text-left d-none d-md-table-cell"},[t._v(" Album ")]),e("th",{staticClass:"text-right d-none d-md-table-cell"},[t._v(" Duration ")])]),e("tbody",t._l(t.tracks,(function(a,s){return e("tr",{key:s,class:{active:s===t.queueIndex},attrs:{draggable:!0},on:{dragstart:function(e){return t.dragstart(a.id,e)},click:function(e){return t.play(s)}}},[e("CellTrackNumber",{attrs:{active:s===t.queueIndex&&t.isPlaying,value:a.track}}),e("CellTitle",{attrs:{track:a}}),e("CellArtist",{attrs:{track:a}}),e("CellAlbum",{attrs:{track:a}}),e("CellDuration",{attrs:{track:a}}),e("CellActions",{attrs:{track:a}},[e("b-dropdown-divider"),e("ContextMenuItem",{attrs:{icon:"x",variant:"danger",disabled:s===t.queueIndex},on:{click:function(e){return t.remove(s)}}},[t._v(" Remove ")])],1)],1)})),0)],1):e("EmptyIndicator")]},proxy:!0}])})],1)},Os=[],Us=function(t,e){return t("table",{staticClass:"table table-hover table-borderless table-numbered"},[e._t("default")],2)},js=[],Qs={},Vs=(0,y.A)(Qs,Us,js,!0,null,null,null),Hs=Vs.exports,Gs=function(t,e){return t("thead",[t("tr",[t("th",[e._v("#")]),t("th",{staticClass:"text-left"},[e._v(" Title ")]),e._t("default"),t("th",{staticClass:"text-right"},[e._v(" Actions ")])],2)])},Ys=[],Zs={},Ws=(0,y.A)(Zs,Gs,Ys,!0,null,null,null),Xs=Ws.exports,Js=function(t,e){return t("td",[t("button",[t("Icon",{staticClass:"icon",attrs:{icon:e.props.active?"pause":"play"}}),t("span",{staticClass:"number"},[e._v(e._s(e.props.value||"-"))])],1)])},Ks=[],tr={},er=(0,y.A)(tr,Js,Ks,!0,null,null,null),ar=er.exports,sr=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("td",{staticClass:"text-right d-none d-md-table-cell"},[t._v(" "+t._s(t.duration)+" ")])},rr=[],ir=(0,s.defineComponent)({props:{track:{type:Object,required:!0}},setup(t){return{duration:t.track.duration?F(t.track.duration):""}}}),nr=ir,or=(0,y.A)(nr,sr,rr,!1,null,null,null),lr=or.exports,ur=function(t,e){return t("td",{staticClass:"d-none d-md-table-cell"},[e.props.track.albumId?[t("router-link",{attrs:{to:{name:"album",params:{id:e.props.track.albumId}}},nativeOn:{click:function(t){t.stopPropagation()}}},[e._v(" "+e._s(e.props.track.album)+" ")])]:[e._v(" "+e._s(e.props.track.album)+" ")]],2)},cr=[],dr={},pr=(0,y.A)(dr,ur,cr,!0,null,null,null),mr=pr.exports,hr=function(t,e){return t("td",{staticClass:"d-none d-lg-table-cell"},[e._l(e.props.track.artists,(function(a,s){return[s>0?t("span",{key:a.id},[e._v(", ")]):e._e(),a.id?t("router-link",{key:`${a.id}-link`,attrs:{to:{name:"artist",params:{id:a.id}}}},[e._v(" "+e._s(a.name)+" ")]):[e._v(" "+e._s(a.name)+" ")]]}))],2)},fr=[],yr={},vr=(0,y.A)(yr,hr,fr,!0,null,null,null),gr=vr.exports,br=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("td",[t._t("default",(function(){return[t._v(t._s(t.track.title))]})),t.track.description?e("div",{staticClass:"text-muted"},[e("small",[t._v(t._s(t.track.description))])]):t.track.artists.length?e("div",{staticClass:"d-lg-none text-muted"},[e("small",[t._v(t._s(t.formatArtists(t.track.artists)))])]):t._e()],2)},kr=[],_r=(0,s.defineComponent)({props:{track:{type:Object,required:!0}},methods:{formatArtists:B}}),xr=_r,wr=(0,y.A)(xr,br,kr,!1,null,null,null),Cr=wr.exports,Ar=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("td",{staticClass:"text-right",on:{click:function(t){t.stopPropagation()}}},[e("OverflowMenu",[t.track.isUnavailable?t._e():e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:function(e){return t.setNextInQueue()}}},[t._v(" Play next ")]),t.track.isUnavailable?t._e():e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:function(e){return t.addToQueue()}}},[t._v(" Add to queue ")]),t.track.isStream?t._e():e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:function(e){t.showPlaylistSelect=!0}}},[t._v(" Add to playlist ")]),t.track.isStream?t._e():e("ContextMenuItem",{attrs:{icon:t.isFavourite?"heart-fill":"heart"},on:{click:function(e){return t.toggleFavourite()}}},[t._v(" Favourite ")]),t.track.isStream?t._e():e("ContextMenuItem",{attrs:{icon:"download"},on:{click:function(e){return t.download()}}},[t._v(" Download ")]),t._t("default",null,{item:t.track})],2),e("b-modal",{attrs:{title:"Add to playlist","ok-only":"","ok-variant":"secondary","ok-title":"Cancel",size:"md"},scopedSlots:t._u([{key:"modal-header-close",fn:function(){return[e("Icon",{attrs:{icon:"x"}})]},proxy:!0}]),model:{value:t.showPlaylistSelect,callback:function(e){t.showPlaylistSelect=e},expression:"showPlaylistSelect"}},[e("div",{staticClass:"list-group list-group-flush"},t._l(t.playlistStore.playlists,(function(a){return e("button",{key:a.id,staticClass:"list-group-item list-group-item-action text-truncate",attrs:{type:"button"},on:{click:function(e){return t.addToPlaylist(a.id)}}},[t._v(" "+t._s(a.name)+" ")])})),0)])],1)},Pr=[],Ir=(0,s.defineComponent)({props:{track:{type:Object,required:!0}},setup(){return{favouriteStore:Gt(),playlistStore:bt()}},data(){return{showPlaylistSelect:!1}},computed:{isFavourite(){return!!this.favouriteStore.tracks[this.track.id]}},methods:{toggleFavourite(){return this.favouriteStore.toggle("track",this.track.id)},download(){window.location.href=this.$api.getDownloadUrl(this.track.id)},setNextInQueue(){return this.$store.dispatch("player/setNextInQueue",[this.track])},addToQueue(){return this.$store.dispatch("player/addToQueue",[this.track])},addToPlaylist(t){return this.showPlaylistSelect=!1,this.playlistStore.addTracks(t,[this.track.id])}}}),Sr=Ir,Tr=(0,y.A)(Sr,Ar,Pr,!1,null,null,null),$r=Tr.exports,Mr=(0,s.defineComponent)({components:{CellActions:$r,CellTitle:Cr,CellArtist:gr,CellAlbum:mr,CellDuration:lr,CellTrackNumber:ar,BaseTableHead:Xs,BaseTable:Hs},computed:{loading(){return null===this.$store.state.player.queue},isPlaying(){return this.$store.getters["player/isPlaying"]},tracks(){return this.$store.state.player.queue},queueIndex(){return this.$store.state.player.queueIndex}},methods:{play(t){return t===this.queueIndex?this.$store.dispatch("player/playPause"):this.$store.dispatch("player/playTrackListIndex",{index:t})},dragstart(t,e){e.dataTransfer.setData("application/x-track-id",t)},remove(t){return this.$store.commit("player/removeFromQueue",t)},clear(){return this.$store.dispatch("player/clearQueue")},shuffle(){return this.$store.commit("player/shuffleQueue")}}}),Lr=Mr,qr=(0,y.A)(Lr,Fs,Os,!1,null,"3caa6fdb",null),Rr=qr.exports,Nr=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ContentLoader",{attrs:{loading:t.loading}},[t._l(t.sections,(function(a){return e("div",{key:a.key,staticClass:"mb-4"},[t.result[a.key].length>0?[e("h1",[t._v(" "+t._s(a.name)+" "),e("router-link",{staticClass:"text-muted",attrs:{to:{name:"albums",params:{sort:a.key}}}},[e("Icon",{attrs:{icon:"chevron-right"}})],1)],1),e("AlbumList",{attrs:{items:t.result[a.key],"allow-h-scroll":""}})]:t._e()],2)})),t.empty?e("EmptyIndicator"):t._e()],2)},zr=[],Dr=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("Tiles",{attrs:{square:"","allow-h-scroll":t.allowHScroll}},t._l(t.items,(function(a){return e("Tile",{key:a.id,attrs:{image:a.image,to:{name:"album",params:{id:a.id}},title:a.name,draggable:!0},on:{dragstart:function(e){return t.dragstart(a.id,e)}},scopedSlots:t._u([{key:"text",fn:function(){return[t._l(a.artists,(function(a,s){return[s>0?e("span",{key:a.id,staticClass:"text-muted"},[t._v(", ")]):t._e(),e("router-link",{key:`${a.id}-link`,staticClass:"text-muted",attrs:{to:{name:"artist",params:{id:a.id}}}},[t._v(" "+t._s(a.name)+" ")])]}))]},proxy:!0},{key:"context-menu",fn:function(){return[e("ContextMenuItem",{attrs:{icon:"play"},on:{click:function(e){return t.playNow(a.id)}}},[t._v(" Play ")]),e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:function(e){return t.playNext(a.id)}}},[t._v(" Play next ")]),e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:function(e){return t.playLater(a.id)}}},[t._v(" Add to queue ")]),e("ContextMenuItem",{attrs:{icon:t.favourites[a.id]?"heart-fill":"heart"},on:{click:function(e){return t.toggleFavourite(a.id)}}},[t._v(" Favourite ")])]},proxy:!0}],null,!0)})})),1)},Br=[],Er=(0,s.defineComponent)({props:{items:{type:Array,required:!0},allowHScroll:{type:Boolean,default:!1}},setup(){return{favouriteStore:Gt()}},computed:{favourites(){return this.favouriteStore.albums}},methods:{async playNow(t){const e=await this.$api.getAlbumDetails(t);return this.$store.dispatch("player/playTrackList",{tracks:e.tracks})},async playNext(t){const e=await this.$api.getAlbumDetails(t);return this.$store.dispatch("player/setNextInQueue",e.tracks)},async playLater(t){const e=await this.$api.getAlbumDetails(t);return this.$store.dispatch("player/addToQueue",e.tracks)},toggleFavourite(t){return this.favouriteStore.toggle("album",t)},dragstart(t,e){e.dataTransfer.setData("application/x-album-id",t)}}}),Fr=Er,Or=(0,y.A)(Fr,Dr,Br,!1,null,null,null),Ur=Or.exports,jr=(0,s.defineComponent)({components:{AlbumList:Ur},data(){return{loading:!0,result:{"recently-added":[],"recently-played":[],"most-played":[],random:[]}}},computed:{sections(){return[{name:"Recently added",key:"recently-added"},{name:"Recently played",key:"recently-played"},{name:"Most played",key:"most-played"},{name:"Random",key:"random"}]},empty(){return-1===Object.values(this.result).findIndex((t=>t.length>0))}},created(){const t=18;this.$api.getAlbums("recently-added",t).then((t=>{this.result["recently-added"]=t,this.loading=!1})),this.$api.getAlbums("recently-played",t).then((t=>{this.result["recently-played"]=t})),this.$api.getAlbums("most-played",t).then((t=>{this.result["most-played"]=t})),this.$api.getAlbums("random",50).then((t=>{this.result.random=t}))}}),Qr=jr,Vr=(0,y.A)(Qr,Nr,zr,!1,null,null,null),Hr=Vr.exports,Gr=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ContentLoader",{attrs:{loading:null==t.item},scopedSlots:t._u([{key:"default",fn:function(){return[e("Hero",{attrs:{image:t.item.image}},[e("h1",[t._v(" "+t._s(t.item.name)+" "),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:t.toggleFavourite}},[e("Icon",{attrs:{icon:t.isFavourite?"heart-fill":"heart"}})],1)],1),e("div",{staticClass:"d-flex flex-wrap align-items-center"},[e("span",{staticClass:"text-nowrap"},[e("strong",[t._v(t._s(t.item.albumCount))]),t._v(" albums ")]),e("span",{staticClass:"mx-1"},[t._v("•")]),e("span",{staticClass:"text-nowrap mr-3"},[e("strong",[t._v(t._s(t.item.trackCount))]),t._v(" tracks ")]),e("div",{staticClass:"d-flex flex-nowrap"},[t.item.lastFmUrl?e("ExternalLink",{staticClass:"btn btn-link p-0 mr-2",attrs:{href:t.item.lastFmUrl,title:"Last.fm"}},[e("IconLastFm")],1):t._e(),t.item.musicBrainzUrl?e("ExternalLink",{staticClass:"btn btn-link mr-2 p-0",attrs:{href:t.item.musicBrainzUrl,title:"MusicBrainz"}},[e("IconMusicBrainz")],1):t._e()],1)]),t.item.genres.length>0?e("div",t._l(t.item.genres,(function({name:a},s){return e("span",{key:a},[s>0?e("span",[t._v("•")]):t._e(),e("router-link",{attrs:{to:{name:"genre",params:{id:a}}}},[t._v(" "+t._s(a)+" ")])],1)})),0):t._e(),t.item.description?e("OverflowFade",{staticClass:"mt-3"},[t._v(" "+t._s(t.item.description)+" ")]):t._e(),e("div",{staticClass:"text-nowrap mt-3"},[e("b-button",{staticClass:"mr-2",attrs:{variant:"secondary",disabled:0===t.item.topTracks.length},on:{click:t.playNow}},[e("Icon",{attrs:{icon:"play"}}),t._v(" Play ")],1),e("b-button",{attrs:{variant:"secondary",disabled:0===t.item.topTracks.length},on:{click:t.shuffleNow}},[e("Icon",{attrs:{icon:"shuffle"}}),t._v(" Shuffle ")],1)],1)],1),t.item.topTracks.length>0?[e("div",{staticClass:"d-flex justify-content-between mt-5 mb-2"},[e("h3",{staticClass:"my-0"},[t._v(" Top tracks ")]),e("router-link",{attrs:{to:{name:"artist-tracks",params:{id:t.id}}}},[t._v(" View all ")])],1),e("TrackList",{attrs:{tracks:t.item.topTracks,"no-artist":""}})]:t._e(),t.albums.length>0?[e("div",{staticClass:"d-flex justify-content-between mt-5 mb-2"},[e("h3",{staticClass:"my-0"},[t._v(" Albums ")]),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:t.toggleAlbumSortOrder}},[e("Icon",{attrs:{icon:"arrow-up-down"}})],1)],1),e("AlbumList",{attrs:{items:t.albums}})]:t._e(),t.item.similarArtist.length>0?[e("h3",{staticClass:"mt-5"},[t._v(" Similar artists ")]),e("ArtistList",{attrs:{items:t.item.similarArtist}})]:t._e()]},proxy:!0}])})},Yr=[],Zr=function(t,e){return t("Tiles",e._l(e.props.items,(function(a){return t("Tile",{key:a.id,attrs:{to:{name:"artist",params:{id:a.id}},title:a.name,image:a.image},scopedSlots:e._u([{key:"text",fn:function(){return[t("strong",[e._v(e._s(a.albumCount))]),e._v(" albums ")]},proxy:!0}],null,!0)})})),1)},Wr=[],Xr={},Jr=(0,y.A)(Xr,Zr,Wr,!0,null,null,null),Kr=Jr.exports,ti=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("BaseTable",[e("BaseTableHead",[t.noArtist?t._e():e("th",{staticClass:"text-left d-none d-lg-table-cell"},[t._v(" Artist ")]),t.noAlbum?t._e():e("th",{staticClass:"text-left d-none d-md-table-cell"},[t._v(" Album ")]),t.noDuration?t._e():e("th",{staticClass:"text-right d-none d-md-table-cell"},[t._v(" Duration ")])]),e("tbody",t._l(t.tracks,(function(a,s){return e("tr",{key:s,class:{active:a.id===t.playingTrackId},attrs:{draggable:!0},on:{dragstart:function(e){return t.dragstart(a,e)},click:function(e){return t.play(s)}}},[e("CellTrackNumber",{attrs:{active:a.id===t.playingTrackId&&t.isPlaying,value:a.track||s+1}}),e("CellTitle",{attrs:{track:a}}),t.noArtist?t._e():e("CellArtist",{attrs:{track:a}}),t.noAlbum?t._e():e("CellAlbum",{attrs:{track:a}}),t.noDuration?t._e():e("CellDuration",{attrs:{track:a}}),e("CellActions",{attrs:{track:a}},[t._t("context-menu",null,{index:s,item:a})],2)],1)})),0)],1)},ei=[],ai=(0,s.defineComponent)({components:{BaseTableHead:Xs,BaseTable:Hs,CellTitle:Cr,CellActions:$r,CellTrackNumber:ar,CellAlbum:mr,CellArtist:gr,CellDuration:lr},props:{tracks:{type:Array,required:!0},noAlbum:{type:Boolean,default:!1},noArtist:{type:Boolean,default:!1},noDuration:{type:Boolean,default:!1}},computed:{isPlaying(){return this.$store.getters["player/isPlaying"]},playingTrackId(){return this.$store.getters["player/trackId"]}},methods:{play(t){return this.tracks[t].id===this.playingTrackId?this.$store.dispatch("player/playPause"):this.$store.dispatch("player/playTrackList",{index:t,tracks:this.tracks})},dragstart(t,e){t.isStream||e.dataTransfer.setData("application/x-track-id",t.id)}}}),si=ai,ri=(0,y.A)(si,ti,ei,!1,null,null,null),ii=ri.exports,ni=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"el",staticClass:"el",on:{scroll:t.updateScrollPosition}},[t._t("default")],2)},oi=[];const li=(0,s.defineComponent)({setup(){const t=(0,s.ref)(null),e=(0,s.ref)(!0),a=(0,s.ref)(!0);function r(){a.value=t.value.scrollHeight-t.value.scrollTop-t.value.clientHeight<1,e.value=t.value.scrollTop<1}const i=(0,s.computed)((()=>e.value?"0":"2em")),n=(0,s.computed)((()=>a.value?"0":"2em")),o=new ResizeObserver((()=>{r()}));return(0,s.onMounted)((()=>{o.observe(t.value)})),(0,s.onUnmounted)((()=>{o.disconnect()})),{el:t,updateScrollPosition:r,maskTop:i,maskBottom:n}}}),ui=()=>{(0,s.useCssVars)(((t,e)=>({"0d665b20":t.maskTop,"34292f30":t.maskBottom})))},ci=li.setup;li.setup=ci?(t,e)=>(ui(),ci(t,e)):ui;var di=li,pi=di,mi=(0,y.A)(pi,ni,oi,!1,null,"31003db6",null),hi=mi.exports,fi=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"icon bi",attrs:{xmlns:"http://www.w3.org/2000/svg",role:"img",focusable:"false","aria-hidden":"true",width:"1em",height:"1em",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"}},[e("path",{attrs:{d:"M14.23 22.512l-1.1-2.99c-1.137 1.176-2.708 1.926-4.454 1.992l-0.012 0c-2.371 0-4.055-2.061-4.055-5.36 0-4.227 2.13-5.739 4.226-5.739 3.025 0 3.986 1.959 4.811 4.468l1.1 3.436c1.1 3.332 3.161 6.012 9.106 6.012 4.261 0 7.148-1.305 7.148-4.741 0-2.784-1.581-4.226-4.538-4.914l-2.197-0.481c-1.512-0.344-1.959-0.963-1.959-1.994 0-1.168 0.927-1.855 2.44-1.855 1.65 0 2.543 0.619 2.68 2.096l3.436-0.412c-0.275-3.092-2.405-4.365-5.911-4.365-3.093 0-6.116 1.169-6.116 4.915 0 2.338 1.134 3.814 3.986 4.501l2.337 0.55c1.753 0.413 2.336 1.134 2.336 2.13 0 1.271-1.238 1.788-3.575 1.788-0.12 0.009-0.26 0.015-0.401 0.015-2.619 0-4.806-1.847-5.33-4.309l-0.006-0.036-1.134-3.438c-1.444-4.466-3.746-6.116-8.316-6.116-5.053 0-7.732 3.196-7.732 8.625 0 5.225 2.68 8.043 7.491 8.043 0.145 0.009 0.314 0.014 0.485 0.014 1.994 0 3.826-0.692 5.27-1.848l-0.017 0.013z"}})])},yi=[],vi={},gi=(0,y.A)(vi,fi,yi,!1,null,null,null),bi=gi.exports,ki=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"icon bi",attrs:{xmlns:"http://www.w3.org/2000/svg",role:"img",focusable:"false","aria-hidden":"true",width:"1em",height:"1em",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M11.582 0L1.418 5.832v12.336L11.582 24V10.01L7.1 12.668v3.664c.01.111.01.225 0 .336-.103.435-.54.804-1 1.111-.802.537-1.752.509-2.166-.111-.413-.62-.141-1.631.666-2.168.384-.28.863-.399 1.334-.332V6.619c0-.154.134-.252.226-.308L11.582 3zm.836 0v6.162c.574.03 1.14.16 1.668.387a2.225 2.225 0 0 0 1.656-.717 1.02 1.02 0 1 1 1.832-.803l.004.006a1.022 1.022 0 0 1-1.295 1.197c-.34.403-.792.698-1.297.85.34.263.641.576.891.928a1.04 1.04 0 0 1 .777.125c.768.486.568 1.657-.318 1.857-.886.2-1.574-.77-1.09-1.539.02-.03.042-.06.065-.09a3.598 3.598 0 0 0-1.436-1.166 4.142 4.142 0 0 0-1.457-.369v4.01c.855.06 1.256.493 1.555.834.227.256.356.39.578.402.323.018.568.008.806 0a5.44 5.44 0 0 1 .895.022c.94-.017 1.272-.226 1.605-.446a2.533 2.533 0 0 1 1.131-.463 1.027 1.027 0 0 1 .12-.263 1.04 1.04 0 0 1 .105-.137c.023-.025.047-.044.07-.066a4.775 4.775 0 0 1 0-2.405l-.012-.01a1.02 1.02 0 1 1 .692.272h-.057a4.288 4.288 0 0 0 0 1.877h.063a1.02 1.02 0 1 1-.545 1.883l-.047-.033a1 1 0 0 1-.352-.442 1.885 1.885 0 0 0-.814.354 3.03 3.03 0 0 1-.703.365c.757.555 1.772 1.6 2.199 2.299a1.03 1.03 0 0 1 .256-.033 1.02 1.02 0 1 1-.545 1.88l-.047-.03a1.017 1.017 0 0 1-.27-1.376.72.72 0 0 1 .051-.072c-.445-.775-2.026-2.28-2.46-2.387a4.037 4.037 0 0 0-1.31-.117c-.24.008-.513.018-.866 0-.515-.027-.783-.333-1.043-.629-.26-.296-.51-.56-1.055-.611V18.5a1.877 1.877 0 0 0 .426-.135.333.333 0 0 1 .058-.027c.56-.267 1.421-.91 2.096-2.447a1.02 1.02 0 0 1-.27-1.344 1.02 1.02 0 1 1 .915 1.54 6.273 6.273 0 0 1-1.432 2.136 1.785 1.785 0 0 1 .691.306.667.667 0 0 0 .37.168 3.31 3.31 0 0 0 .888-.222 1.02 1.02 0 0 1 1.787-.79v-.005a1.02 1.02 0 0 1-.773 1.683 1.022 1.022 0 0 1-.719-.287 3.935 3.935 0 0 1-1.168.287h-.05a1.313 1.313 0 0 1-.71-.275c-.262-.177-.51-.345-1.402-.12a2.098 2.098 0 0 1-.707.2V24l10.164-5.832V5.832zm4.154 4.904a.352.352 0 0 0-.197.639l.018.01c.163.1.378.053.484-.108v-.002a.352.352 0 0 0-.303-.539zm-4.99 1.928L7.082 9.5v2l4.5-2.668zm8.385.38a.352.352 0 0 0-.295.165v.002a.35.35 0 0 0 .096.473l.013.01a.357.357 0 0 0 .487-.108.352.352 0 0 0-.301-.541zM16.09 8.647a.352.352 0 0 0-.277.163.355.355 0 0 0 .296.54c.482 0 .463-.73-.02-.703zm3.877 2.477a.352.352 0 0 0-.295.164.35.35 0 0 0 .094.475l.015.01a.357.357 0 0 0 .485-.11.352.352 0 0 0-.3-.539zm-4.375 3.594a.352.352 0 0 0-.291.172.35.35 0 0 0-.04.265.352.352 0 1 0 .33-.437zm4.375.789a.352.352 0 0 0-.295.164v.002a.352.352 0 0 0 .094.473l.015.01a.357.357 0 0 0 .485-.108.352.352 0 0 0-.3-.54zm-2.803 2.488v.002a.347.347 0 0 0-.223.084.352.352 0 0 0 .23.62.347.347 0 0 0 .23-.085.348.348 0 0 0 .12-.24.353.353 0 0 0-.35-.38.347.347 0 0 0-.007 0Z"}})])},_i=[],xi={},wi=(0,y.A)(xi,ki,_i,!1,null,null,null),Ci=wi.exports,Ai=(0,s.defineComponent)({components:{IconMusicBrainz:Ci,IconLastFm:bi,AlbumList:Ur,ArtistList:Kr,OverflowFade:hi,TrackList:ii},props:{id:{type:String,required:!0}},setup(){return{mainStore:p(),favouriteStore:Gt()}},data(){return{item:null}},computed:{isFavourite(){return!!this.favouriteStore.artists[this.id]},albums(){return(0,gt.A)(this.item?.albums??[],"year",this.mainStore.artistAlbumSortOrder)}},watch:{id:{immediate:!0,async handler(t){this.item=null,this.item=await this.$api.getArtistDetails(t)}}},methods:{playNow(){return this.$store.dispatch("player/playNow",{tracks:this.item.topTracks})},shuffleNow(){return this.$store.dispatch("player/shuffleNow",{tracks:this.item.topTracks})},toggleFavourite(){return this.favouriteStore.toggle("artist",this.id)},toggleAlbumSortOrder(){this.mainStore.toggleArtistAlbumSortOrder()}}}),Pi=Ai,Ii=(0,y.A)(Pi,Gr,Yr,!1,null,null,null),Si=Ii.exports,Ti=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("ul",{staticClass:"nav-underlined mb-3"},[e("li",[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:null}}}},[t._v(" Most albums ")])],1),e("li",[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:"a-z"}}}},[t._v(" A-Z ")])],1)]),e("ContentLoader",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"default",fn:function(){return[e("ArtistList",{attrs:{items:t.sortedItems}}),0===t.items.length?e("EmptyIndicator"):t._e()]},proxy:!0}])})],1)},$i=[],Mi=(0,s.defineComponent)({components:{ArtistList:Kr},props:{sort:{type:String,default:null}},data(){return{loading:!0,items:[]}},computed:{sortedItems(){return"a-z"===this.sort?(0,gt.A)(this.items,"name"):(0,gt.A)(this.items,"albumCount","desc")}},async created(){this.items=Object.freeze(await this.$api.getArtists()),this.loading=!1}}),Li=Mi,qi=(0,y.A)(Li,Ti,$i,!1,null,null,null),Ri=qi.exports,Ni=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.album?e("div",[e("Hero",{attrs:{image:t.album.image}},[e("h1",[t._v(" "+t._s(t.album.name)+" "),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:t.toggleFavourite}},[e("Icon",{attrs:{icon:t.isFavourite?"heart-fill":"heart"}})],1)],1),e("div",{staticClass:"d-flex flex-wrap align-items-center"},[e("div",[t._v(" by "),t._l(t.album.artists,(function(a,s){return e("span",{key:a.id},[s>0?e("span",[t._v(", ")]):t._e(),e("router-link",{attrs:{to:{name:"artist",params:{id:a.id}}}},[t._v(" "+t._s(a.name)+" ")])],1)}))],2),t.album.year?e("span",{staticClass:"mx-1"},[t._v(" • "+t._s(t.album.year))]):t._e(),e("span",{staticClass:"mr-3"}),e("div",{staticClass:"d-flex flex-nowrap"},[t.album.lastFmUrl?e("ExternalLink",{staticClass:"btn btn-link p-0 mr-2",attrs:{href:t.album.lastFmUrl,title:"Last.fm"}},[e("IconLastFm")],1):t._e(),t.album.musicBrainzUrl?e("ExternalLink",{staticClass:"btn btn-link mr-2 p-0",attrs:{href:t.album.musicBrainzUrl,title:"MusicBrainz"}},[e("IconMusicBrainz")],1):t._e()],1)]),t.album.genres.length?e("div",t._l(t.album.genres,(function({name:a},s){return e("span",{key:a},[s>0?e("span",[t._v("•")]):t._e(),e("router-link",{attrs:{to:{name:"genre",params:{id:a}}}},[t._v(" "+t._s(a)+" ")])],1)})),0):t._e(),t.album.description?e("OverflowFade",{staticClass:"mt-3"},[t._v(" "+t._s(t.album.description)+" ")]):t._e(),e("div",{staticClass:"text-nowrap mt-3"},[e("b-button",{staticClass:"mr-2",attrs:{variant:"secondary"},on:{click:t.playNow}},[e("Icon",{attrs:{icon:"play"}}),t._v(" Play ")],1),e("b-button",{staticClass:"mr-2",attrs:{variant:"secondary"},on:{click:t.shuffleNow}},[e("Icon",{attrs:{icon:"shuffle"}}),t._v(" Shuffle ")],1),e("OverflowMenu",{staticClass:"px-1"},[e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:t.setNextInQueue}},[t._v(" Play next ")]),e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:t.addToQueue}},[t._v(" Add to queue ")])],1)],1)],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("TrackList",{attrs:{tracks:t.album.tracks,"no-album":""}})],1)])],1):t._e()},zi=[],Di=(0,s.defineComponent)({components:{OverflowFade:hi,IconMusicBrainz:Ci,IconLastFm:bi,TrackList:ii},props:{id:{type:String,required:!0}},setup(){return{favouriteStore:Gt()}},data(){return{album:null}},computed:{isFavourite(){return!!this.favouriteStore.albums[this.id]}},async created(){this.album=await this.$api.getAlbumDetails(this.id)},methods:{playNow(){return this.$store.dispatch("player/playNow",{tracks:this.album.tracks})},shuffleNow(){return this.$store.dispatch("player/shuffleNow",{tracks:this.album.tracks})},setNextInQueue(){if(this.album)return this.$store.dispatch("player/setNextInQueue",this.album.tracks)},addToQueue(){if(this.album)return this.$store.dispatch("player/addToQueue",this.album.tracks)},toggleFavourite(){return this.favouriteStore.toggle("album",this.id)}}}),Bi=Di,Ei=(0,y.A)(Bi,Ni,zi,!1,null,null,null),Fi=Ei.exports,Oi=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("ul",{staticClass:"nav-underlined mb-3"},t._l(t.options,(function({value:a,text:s}){return e("li",{key:a},[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:a}}}},[t._v(" "+t._s(s)+" ")])],1)})),0),e("AlbumList",{attrs:{items:t.albums}}),e("InfiniteLoader",{key:t.sort,attrs:{loading:t.loading,"has-more":t.hasMore},on:{"load-more":t.loadMore}}),t.loading||0!==t.albums.length?t._e():e("EmptyIndicator")],1)},Ui=[],ji=(0,s.defineComponent)({components:{AlbumList:Ur},props:{sort:{type:String,required:!0}},data(){return{albums:[],loading:!0,offset:0,hasMore:!0}},computed:{options(){return[{text:"Recently added",value:"recently-added"},{text:"Recently played",value:"recently-played"},{text:"Most played",value:"most-played"},{text:"A-Z",value:"a-z"},{text:"Random",value:"random"}]}},watch:{sort:{handler(){this.albums=[],this.offset=0,this.hasMore=!0}}},methods:{loadMore(){return this.loading=!0,this.$api.getAlbums(this.sort,50,this.offset).then((t=>{this.albums.push(...t),this.offset+=t.length,this.hasMore=t.length>0,this.loading=!1}))}}}),Qi=ji,Vi=(0,y.A)(Qi,Oi,Ui,!1,null,null,null),Hi=Vi.exports,Gi=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("h1",[t._v(t._s(t.id))]),e("ul",{staticClass:"nav-underlined mb-3"},[e("li",[e("router-link",{attrs:{to:{...t.$route,params:{}}}},[t._v(" Albums ")])],1),e("li",[e("router-link",{attrs:{to:{...t.$route,params:{section:"tracks"}}}},[t._v(" Tracks ")])],1)]),"tracks"===t.section?[e("InfiniteList",{key:"tracks",attrs:{load:t.loadTracks},scopedSlots:t._u([{key:"default",fn:function({items:t}){return[e("TrackList",{attrs:{tracks:t}})]}}],null,!1,1154193652)})]:[e("InfiniteList",{key:"albums",attrs:{load:t.loadAlbums},scopedSlots:t._u([{key:"default",fn:function({items:t}){return[e("AlbumList",{attrs:{items:t}})]}}])})]],2)},Yi=[],Zi=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t._t("default",null,{items:t.items}),e("InfiniteLoader",{attrs:{loading:t.loading,"has-more":t.hasMore},on:{"load-more":t.loadMore}})],2)},Wi=[],Xi=(0,s.defineComponent)({props:{load:{type:Function,required:!0}},data(){return{items:[],loading:!1,offset:0,hasMore:!0}},methods:{loadMore(){return this.loading=!0,this.load(this.offset).then((t=>{this.items.push(...t),this.offset+=t.length,this.hasMore=t.length>0,this.loading=!1}))}}}),Ji=Xi,Ki=(0,y.A)(Ji,Zi,Wi,!1,null,null,null),tn=Ki.exports,en=(0,s.defineComponent)({components:{AlbumList:Ur,TrackList:ii,InfiniteList:tn},props:{id:{type:String,required:!0},section:{type:String,default:""}},methods:{loadAlbums(t){return this.$api.getAlbumsByGenre(this.id,50,t)},loadTracks(t){return this.$api.getTracksByGenre(this.id,50,t)}}}),an=en,sn=(0,y.A)(an,Gi,Yi,!1,null,null,null),rn=sn.exports,nn=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("ul",{staticClass:"nav-underlined mb-3"},[e("li",[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:null}}}},[t._v(" Most albums ")])],1),e("li",[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:"a-z"}}}},[t._v(" A-Z ")])],1)]),e("ContentLoader",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"default",fn:function(){return[t.sortedItems.length>0?e("Tiles",t._l(t.sortedItems,(function(a){return e("Tile",{key:a.id,attrs:{to:{name:"genre",params:{id:a.id}},title:a.name,image:a.image},scopedSlots:t._u([{key:"text",fn:function(){return[e("strong",[t._v(t._s(a.albumCount))]),t._v(" albums • "),e("strong",[t._v(t._s(a.trackCount))]),t._v(" tracks ")]},proxy:!0}],null,!0)})})),1):e("EmptyIndicator")]},proxy:!0}])})],1)},on=[],ln=(0,s.defineComponent)({props:{sort:{type:String,default:null}},data(){return{loading:!0,items:[]}},computed:{sortedItems(){return"a-z"===this.sort?(0,gt.A)(this.items,"name"):(0,gt.A)(this.items,"albumCount","desc")}},async created(){this.items=await this.$api.getGenres(),this.loading=!1}}),un=ln,cn=(0,y.A)(un,nn,on,!1,null,null,null),dn=cn.exports,pn=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("ul",{staticClass:"nav-underlined mb-3"},[e("li",[e("router-link",{attrs:{to:{...t.$route,params:{}}}},[t._v(" Albums ")])],1),e("li",[e("router-link",{attrs:{to:{...t.$route,params:{section:"artists"}}}},[t._v(" Artists ")])],1),e("li",[e("router-link",{attrs:{to:{...t.$route,params:{section:"tracks"}}}},[t._v(" Tracks ")])],1)]),e("ContentLoader",{attrs:{loading:null==t.details},scopedSlots:t._u([{key:"default",fn:function(){return["artists"===t.section?[t.details.artists.length>0?e("ArtistList",{attrs:{items:t.details.artists}}):e("EmptyIndicator")]:"tracks"===t.section?[t.details.tracks.length>0?e("TrackList",{attrs:{tracks:t.details.tracks}}):e("EmptyIndicator")]:[t.details.albums.length>0?e("AlbumList",{attrs:{items:t.details.albums}}):e("EmptyIndicator")]]},proxy:!0}])})],1)},mn=[],hn=a(7206),fn=a(9062),yn=a(4107),vn=a(4722);class gn extends Error{}class bn extends Error{constructor(t,e){super(t),(0,$.A)(this,"code",void 0),this.name="SubsonicError",this.code=e}}class kn{constructor(t){(0,$.A)(this,"auth",void 0),(0,$.A)(this,"fetch",void 0),(0,$.A)(this,"clientName",window.origin||"web"),this.auth=t,this.fetch=(e,a)=>{a={...a,v:"1.15.0",f:"json",c:this.clientName};const s=t.serverInfo?.extensions.includes("formPost")?new Request(`${this.auth.server}/${e}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:`${E(a)}&${this.auth.urlParams}`}):new Request(`${this.auth.server}/${e}?${E(a)}&${this.auth.urlParams}`,{method:"GET",headers:{Accept:"application/json"}});return window.fetch(s).then((t=>{if(t.ok)return t.json();const e=`Request failed with status ${t.status}`;return 501===t.status?Promise.reject(new gn(e)):Promise.reject(new Error(e))})).then((t=>{const e=t["subsonic-response"];if("ok"===e.status)return e;const a=e.error?.code,s=e.error?.message||e.status;throw new bn(s,a)}))}}async getGenres(){const t=await this.fetch("rest/getGenres",{});return(t.genres.genre||[]).map((t=>({id:t.value,name:t.value,albumCount:t.albumCount??0,trackCount:t.songCount??0}))).sort(((t,e)=>e.albumCount-t.albumCount))}async getAlbumsByGenre(t,e,a=0){const s={type:"byGenre",genre:t,size:e,offset:a},r=await this.fetch("rest/getAlbumList2",s);return(r.albumList2?.album||[]).map(this.normalizeAlbum,this)}async getTracksByGenre(t,e,a=0){const s={genre:t,count:e,offset:a},r=await this.fetch("rest/getSongsByGenre",s);return(r.songsByGenre?.song||[]).map(this.normalizeTrack,this)}async getArtists(){const t=await this.fetch("rest/getArtists");return(t.artists?.index||[]).flatMap((t=>t.artist)).map(this.normalizeArtist,this)}async getAlbums(t,e,a=0){const s={"a-z":"alphabeticalByName","recently-added":"newest","recently-played":"recent","most-played":"frequent",random:"random"}[t],r={type:s,offset:a,size:e},i=await this.fetch("rest/getAlbumList2",r),n=i.albumList2?.album||[];return n.map(this.normalizeAlbum,this)}async getArtistDetails(t){const e=this.fetch("rest/getArtistInfo2",{id:t}).then((t=>t.artistInfo2)),a=await this.fetch("rest/getArtist",{id:t}).then((t=>t.artist)),s=await this.fetch("rest/getTopSongs",{artist:a.name}).then((t=>t.topSongs?.song)),r=await e;return this.normalizeArtist({...a,...r,topSongs:s})}async*getTracksByArtist(t){const e=await this.fetch("rest/getArtist",{id:t}).then((t=>t.artist)),a=(0,gt.A)(e.album||[],(t=>t.year||0),"desc").map((t=>t.id));for(const s of a){const{tracks:t}=await this.getAlbumDetails(s);t&&t.length>0&&(yield t)}}async getAlbumDetails(t){const e={id:t},[a,s]=await Promise.all([this.fetch("rest/getAlbum",e),this.fetch("rest/getAlbumInfo2",e)]);return this.normalizeAlbum({...a.album,...s.albumInfo})}async getPlaylists(){const t=await this.fetch("rest/getPlaylists");return(t.playlists?.playlist||[]).map(this.normalizePlaylist,this)}async getPlaylist(t){if("random"===t){const e=await this.getRandomSongs(),a=(0,hn.A)(e,"duration");return{id:t,name:"Random",comment:"",createdAt:"",updatedAt:"",tracks:e,trackCount:e.length,duration:a,isPublic:!1,isReadOnly:!0}}const e=await this.fetch("rest/getPlaylist",{id:t});return{...this.normalizePlaylist(e.playlist),tracks:(e.playlist.entry||[]).map(this.normalizeTrack,this)}}async createPlaylist(t){return await this.fetch("rest/createPlaylist",{name:t}),this.getPlaylists()}async editPlaylist(t,e,a,s){const r={playlistId:t,name:e,comment:a,public:s};await this.fetch("rest/updatePlaylist",r)}async deletePlaylist(t){await this.fetch("rest/deletePlaylist",{id:t})}async addToPlaylist(t,e){const a={playlistId:t,songIdToAdd:e};await this.fetch("rest/updatePlaylist",a)}async removeFromPlaylist(t,e){const a={playlistId:t,songIndexToRemove:e};await this.fetch("rest/updatePlaylist",a)}async getPlayQueue(){const t=await this.fetch("rest/getPlayQueue"),e=(t.playQueue?.entry||[]).map(this.normalizeTrack,this),a=t.playQueue?.current?.toString(),s=e.findIndex((t=>t.id===a))??0;return{tracks:e,currentTrack:s,currentTrackPosition:(t.playQueue?.position||0)/1e3}}async savePlayQueue(t,e,a){const s=t.filter((t=>!t.isStream)).map((t=>t.id)),r={id:s,current:e?.isStream?void 0:e?.id,position:null!=a?Math.round(1e3*a):void 0};try{await this.fetch("rest/savePlayQueue",r)}catch(i){if(0===i.code||10===i.code)return;throw i}}async getRandomSongs(){const t={size:200},e=await this.fetch("rest/getRandomSongs",t);return(e.randomSongs?.song||[]).map(this.normalizeTrack,this)}async getFavourites(){const t=await this.fetch("rest/getStarred2");return{albums:(t.starred2?.album||[]).map(this.normalizeAlbum,this),artists:(t.starred2?.artist||[]).map(this.normalizeArtist,this),tracks:(t.starred2?.song||[]).map(this.normalizeTrack,this)}}async addFavourite(t,e){const a={id:"track"===e?t:void 0,albumId:"album"===e?t:void 0,artistId:"artist"===e?t:void 0};await this.fetch("rest/star",a)}async removeFavourite(t,e){const a={id:"track"===e?t:void 0,albumId:"album"===e?t:void 0,artistId:"artist"===e?t:void 0};await this.fetch("rest/unstar",a)}async search(t){const e={query:t},a=await this.fetch("rest/search3",e);return{tracks:(a.searchResult3.song||[]).map(this.normalizeTrack,this),albums:(a.searchResult3.album||[]).map(this.normalizeAlbum,this),artists:(a.searchResult3.artist||[]).map(this.normalizeArtist,this)}}async getRadioStations(){const t=await this.fetch("rest/getInternetRadioStations");return(t?.internetRadioStations?.internetRadioStation||[]).map(((t,e)=>({...t,track:e+1}))).map(this.normalizeRadioStation,this)}async addRadioStation(t,e,a){const s={name:t??"",streamUrl:e,homepageUrl:""===a?.trim()?void 0:a};return await this.fetch("rest/createInternetRadioStation",s),await this.getRadioStations()}async updateRadioStation(t){const e={id:t.id.replace("radio-",""),name:t.title??"",streamUrl:t.url,homepageUrl:""===t.description?.trim()?void 0:t.description};return await this.fetch("rest/updateInternetRadioStation",e),await this.getRadioStations()}async deleteRadioStation(t){return this.fetch("rest/deleteInternetRadioStation",{id:t.replace("radio-","")})}async getPodcasts(){const t=await this.fetch("rest/getPodcasts");return(t?.podcasts?.channel||[]).map(this.normalizePodcast,this)}async getPodcast(t){const e=await this.fetch("rest/getPodcasts",{id:t});return this.normalizePodcast(e?.podcasts?.channel[0])}async addPodcast(t){return this.fetch("rest/createPodcastChannel",{url:t})}async refreshPodcasts(){return this.fetch("rest/refreshPodcasts")}async deletePodcast(t){return this.fetch("rest/deletePodcastChannel",{id:t})}async getDirectory(t){const e=t.split("/"),a=e[0],s=e.length>1?e[e.length-1]:"";if(""===a){const t=await this.fetch("rest/getMusicFolders"),e=t?.musicFolders?.musicFolder??[];return{id:"",name:"",tracks:[],directories:e.map((t=>({id:`${t?.id}`,name:t?.name})))}}if(""===s){const t=await this.fetch("rest/getIndexes",{musicFolderId:a}),e=(t?.indexes?.index??[]).flatMap((t=>[...(t?.artist||[]).map((t=>({id:t.id,name:t.name})))])),s=(t?.indexes?.child??[]).map(this.normalizeTrack,this);return{id:a,name:a,tracks:s,directories:e}}const r=await this.fetch("rest/getMusicDirectory",{id:s}),i=r?.directory?.child??[],n=i.filter((t=>t.isDir)).map((t=>({id:t.id,name:t.title}))),o=i.filter((t=>!t.isDir&&"music"===t.type&&t?.duration>0)).map(this.normalizeTrack,this);return{id:r.directory.id,name:r.directory.name,tracks:o,directories:n}}async scan(){return this.fetch("rest/startScan")}async scrobble(t){return this.fetch("rest/scrobble",{id:t,submission:!0})}async updateNowPlaying(t){return this.fetch("rest/scrobble",{id:t,submission:!1})}normalizeRadioStation(t){return{id:`radio-${t.id}`,title:t.name,description:t.homepageUrl||t.homePageUrl,album:t.name,track:t.track,url:t.streamUrl,duration:0,favourite:!1,isStream:!0,artists:[]}}normalizeTrack(t){return{id:t.id,title:t.title,duration:t.duration,favourite:!!t.starred,track:t.track,album:t.album,albumId:t.albumId,artists:t.artists?.length?t.artists:[{id:t.artistId,name:t.artist}],url:this.getStreamUrl(t.id),image:this.getCoverArtUrl(t)}}normalizeGenres(t){return t.genres?.length?t.genres:t.genre?[{name:t.genre}]:[]}normalizeAlbum(t){return{id:t.id,name:t.name,description:(t.notes||"").replace(/<a[^>]*>.*?<\/a>/gm,""),artists:t.artists?.length?t.artists:[{id:t.artistId,name:t.artist}],image:this.getCoverArtUrl(t),year:t.year||0,favourite:!!t.starred,genres:this.normalizeGenres(t),lastFmUrl:t.lastFmUrl,musicBrainzUrl:t.musicBrainzId?`https://musicbrainz.org/release/${t.musicBrainzId}`:void 0,tracks:(t.song||[]).map(this.normalizeTrack,this)}}normalizeArtist(t){return{id:t.id,name:t.name,description:(t.biography||"").replace(/<a[^>]*>.*?<\/a>/gm,""),genres:(0,fn.A)([...(t.album||[]).flatMap(this.normalizeGenres,this)],"name"),albumCount:t.albumCount,trackCount:(t.album||[]).reduce(((t,e)=>t+(e.songCount||0)),0),favourite:!!t.starred,lastFmUrl:t.lastFmUrl,musicBrainzUrl:t.musicBrainzId?`https://musicbrainz.org/artist/${t.musicBrainzId}`:void 0,albums:(t.album||[]).map(this.normalizeAlbum,this),similarArtist:(t.similarArtist||[]).map(this.normalizeArtist,this),topTracks:(t.topSongs||[]).slice(0,5).map(this.normalizeTrack,this),image:t.coverArt?this.getCoverArtUrl(t):t.artistImageUrl}}normalizePlaylist(t){return{id:t.id,name:t.name||"(Unnamed)",comment:t.comment||"",createdAt:t.created||"",updatedAt:t.changed||"",trackCount:t.songCount,duration:t.duration,image:t.songCount>0?this.getCoverArtUrl(t):void 0,isPublic:t.public,isReadOnly:!1}}normalizePodcast(t){const e=t.originalImageUrl,a=t.episode||[];return{id:t.id,name:t.title||t.url,description:t.description,image:e,url:t.url,trackCount:a.length,updatedAt:(0,yn.A)((0,vn.A)(a,"publishDate")),tracks:a.map(((s,r)=>({id:s.streamId,title:s.title,duration:s.duration,favourite:!1,track:a.length-r,album:t.title,albumId:void 0,image:e,isPodcast:!0,isUnavailable:"completed"!==s.status||!s.streamId,url:"completed"===s.status&&s.streamId?this.getStreamUrl(s.streamId):void 0,description:s.description,playCount:s.playCount||0,artists:[]})))}}getDownloadUrl(t){const{server:e,urlParams:a}=this.auth;return`${e}/rest/download?id=${t}&v=1.15.0&${a}&c=${this.clientName}`}getCoverArtUrl(t){if(!t.coverArt)return;const{server:e,urlParams:a}=this.auth;return`${e}/rest/getCoverArt?id=${t.coverArt}&v=1.15.0&${a}&c=${this.clientName}&size=300`}getStreamUrl(t){const{server:e,urlParams:a}=this.auth;return`${e}/rest/stream?id=${t}&v=1.15.0&${a}&c=${this.clientName}`}}const _n=Symbol("");function xn(){return(0,s.inject)(_n)}function wn(t){const e=new kn(t);return Object.assign(e,{install:t=>{t.config.globalProperties.$api=e,t.provide(_n,e)}})}var Cn=(0,s.defineComponent)({components:{AlbumList:Ur,ArtistList:Kr,TrackList:ii},props:{section:{type:String,default:""}},setup(){const t=xn(),e=Gt(),a=(0,s.ref)(null);return(0,s.watch)((()=>[e]),(async()=>{const s=await t.getFavourites();a.value={albums:s.albums.filter((t=>e.albums[t.id])),artists:s.artists.filter((t=>e.artists[t.id])),tracks:s.tracks.filter((t=>e.tracks[t.id]))}}),{deep:!0,immediate:!0}),{details:a}}}),An=Cn,Pn=(0,y.A)(An,pn,mn,!1,null,null,null),In=Pn.exports,Sn=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ContentLoader",{attrs:{loading:null===t.items},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[e("h1",{staticClass:"mb-0 mr-2 text-truncate"},[t._v(" Radio ")])]),t.items.length>0?e("TrackList",{attrs:{tracks:t.items,"no-artist":"","no-album":"","no-duration":""}}):t.unsupported?e("EmptyIndicator",{attrs:{label:"Not supported"}}):e("EmptyIndicator")]},proxy:!0}])})},Tn=[],$n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("b-modal",{attrs:{"ok-title":"Save",visible:t.visible},on:{ok:t.confirm,change:t.change},scopedSlots:t._u([{key:"modal-header-close",fn:function(){return[e("Icon",{attrs:{icon:"x"}})]},proxy:!0},{key:"modal-title",fn:function(){return[t._t("title",(function(){return[t._v(" "+t._s(t.title)+" ")]}),{item:t.copy})]},proxy:!0}],null,!0)},[t.visible?[t._t("default",null,{item:t.copy})]:t._e()],2)},Mn=[],Ln=(0,s.defineComponent)({props:{item:{type:Object,default:null},visible:{type:Boolean,required:!0},title:{type:String,default:""}},data(){return{copy:null}},watch:{item:{immediate:!0,handler(t){this.copy={...t}}}},methods:{confirm(){this.$emit("confirm",this.copy)},change(){this.$emit("update:visible",!1)}}}),qn=Ln,Rn=(0,y.A)(qn,$n,Mn,!1,null,null,null),Nn=Rn.exports,zn=(0,s.defineComponent)({components:{TrackList:ii,ContentLoader:Me,EditModal:Nn},data(){return{items:null,unsupported:!1,modalVisible:!1,editItem:{}}},async created(){try{this.items=await this.$api.getRadioStations()}catch(t){if(t instanceof gn)return this.items=[],void(this.unsupported=!0);throw t}}}),Dn=zn,Bn=(0,y.A)(Dn,Sn,Tn,!1,null,null,null),En=Bn.exports,Fn=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ContentLoader",{attrs:{loading:null==t.podcast},scopedSlots:t._u([{key:"default",fn:function(){return[e("Hero",{attrs:{image:t.podcast.image}},[e("h1",[t._v(" "+t._s(t.podcast.name)+" ")]),t.podcast.description?e("OverflowFade",{staticClass:"mb-3"},[t._v(" "+t._s(t.podcast.description)+" ")]):t._e(),e("div",{staticClass:"text-nowrap"},[e("b-button",{staticClass:"mr-2",attrs:{variant:"secondary",disabled:0===t.playableTracks.length},on:{click:t.playNow}},[e("Icon",{attrs:{icon:"play"}}),t._v(" Play ")],1),e("b-button",{attrs:{variant:"secondary",disabled:0===t.playableTracks.length},on:{click:t.shuffleNow}},[e("Icon",{attrs:{icon:"shuffle"}}),t._v(" Shuffle ")],1),e("OverflowMenu",{staticClass:"px-1"},[e("ContextMenuItem",{attrs:{icon:"x",variant:"danger"},on:{click:t.deletePodcast}},[t._v(" Delete ")])],1)],1)],1),t.podcast.tracks.length>0?e("BaseTable",[e("BaseTableHead",[e("th",{staticClass:"text-right d-none d-md-table-cell"},[t._v(" Duration ")])]),e("tbody",t._l(t.podcast.tracks,(function(a,s){return e("tr",{key:s,class:{active:a.id===t.playingTrackId,disabled:a.isUnavailable},on:{click:function(e){return t.playTrack(a)}}},[e("CellTrackNumber",{attrs:{active:a.id===t.playingTrackId&&t.isPlaying,value:a.track}}),e("CellTitle",{attrs:{track:a}},[t._v(" "+t._s(a.title)+" "),a.playCount>0?e("Icon",{attrs:{icon:"check"}}):t._e()],1),e("CellDuration",{attrs:{track:a}}),e("CellActions",{attrs:{track:a}})],1)})),0)],1):e("EmptyIndicator")]},proxy:!0}])})},On=[],Un=(0,s.defineComponent)({components:{BaseTableHead:Xs,BaseTable:Hs,CellTitle:Cr,CellDuration:lr,CellActions:$r,CellTrackNumber:ar,OverflowFade:hi},props:{id:{type:String,required:!0}},data(){return{podcast:null}},computed:{isPlaying(){return this.$store.getters["player/isPlaying"]},playingTrackId(){return this.$store.getters["player/trackId"]},playableTracks(){return this.podcast.tracks.filter((t=>!t.isUnavailable))}},async created(){this.podcast=await this.$api.getPodcast(this.id)},methods:{async playNow(){return this.$store.dispatch("player/playNow",{tracks:this.playableTracks})},async shuffleNow(){return this.$store.dispatch("player/shuffleNow",{tracks:this.playableTracks})},async playTrack(t){if(t.isUnavailable)return;if(t.id===this.playingTrackId)return this.$store.dispatch("player/playPause");const e=this.playableTracks.findIndex((e=>e.id===t.id));return this.$store.dispatch("player/playTrackList",{index:e,tracks:this.playableTracks})},async deletePodcast(){return this.podcast=null,await this.$api.deletePodcast(this.id),this.$router.replace({name:"podcasts"})}}}),jn=Un,Qn=(0,y.A)(jn,Fn,On,!1,null,null,null),Vn=Qn.exports,Hn=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[e("ul",{staticClass:"nav-underlined"},[e("li",[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:null}}}},[t._v(" Recently updated ")])],1),e("li",[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:"a-z"}}}},[t._v(" A-Z ")])],1)]),e("div",[e("b-button",{staticClass:"mr-2",attrs:{variant:"link"},on:{click:function(e){t.showAddModal=!0}}},[e("Icon",{attrs:{icon:"plus"}})],1),e("b-button",{attrs:{icon:"refresh",variant:"link"},on:{click:function(e){return t.refresh()}}},[e("Icon",{attrs:{icon:"refresh"}})],1)],1)]),e("ContentLoader",{attrs:{loading:null===t.items},scopedSlots:t._u([{key:"default",fn:function(){return[t.items.length>0?e("Tiles",{attrs:{square:""}},t._l(t.sortedItems,(function(a){return e("Tile",{key:a.id,attrs:{image:a.image,to:{name:"podcast",params:{id:a.id}},title:a.name},scopedSlots:t._u([{key:"text",fn:function(){return[e("strong",[t._v(t._s(a.trackCount))]),t._v(" episodes ")]},proxy:!0}],null,!0)})})),1):t.unsupported?e("EmptyIndicator",{attrs:{label:"Not supported"}}):e("EmptyIndicator")]},proxy:!0}])}),e("AddPodcastModal",{attrs:{visible:t.showAddModal},on:{"update:visible":function(e){t.showAddModal=e},confirm:t.add}})],1)},Gn=[],Yn=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("b-modal",{attrs:{visible:t.visible},on:{ok:t.confirm,change:t.change},scopedSlots:t._u([{key:"modal-header-close",fn:function(){return[e("Icon",{attrs:{icon:"x"}})]},proxy:!0},{key:"modal-title",fn:function(){return[t._v(" Add podcast ")]},proxy:!0},{key:"modal-ok",fn:function(){return[t._v(" Add ")]},proxy:!0}])},[e("div",{staticClass:"form-group"},[e("label",[t._v("URL")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",class:{"is-invalid":t.hasError},attrs:{type:"text"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[t._v(" Required ")])])])},Zn=[],Wn=(0,s.defineComponent)({props:{visible:{type:Boolean,required:!0}},data(){return{url:"",hasError:!1}},methods:{confirm(t){if(0===this.url.length)return this.hasError=!0,void t.preventDefault();this.$emit("confirm",this.url)},change(){this.hasError=!1,this.url="",this.$emit("update:visible",!1)}}}),Xn=Wn,Jn=(0,y.A)(Xn,Yn,Zn,!1,null,null,null),Kn=Jn.exports,to=(0,s.defineComponent)({components:{AddPodcastModal:Kn},props:{sort:{type:String,default:null}},data(){return{items:null,showAddModal:!1,unsupported:!1}},computed:{sortedItems(){return"a-z"===this.sort?(0,gt.A)(this.items,"name"):(0,gt.A)(this.items,"updatedAt","desc")}},async created(){try{this.items=await this.$api.getPodcasts()}catch(t){if(t instanceof gn)return this.items=[],void(this.unsupported=!0);throw t}},methods:{async refresh(){await this.$api.refreshPodcasts(),this.items=await this.$api.getPodcasts()},async add(t){await this.$api.addPodcast(t),this.items=await this.$api.getPodcasts(),await new Promise((t=>setTimeout(t,1e3))),this.items=await this.$api.getPodcasts()}}}),eo=to,ao=(0,y.A)(eo,Hn,Gn,!1,null,null,null),so=ao.exports,ro=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ContentLoader",{attrs:{loading:null==t.playlist},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"d-flex align-items-center mb-2"},[e("h1",{staticClass:"mb-0 mr-2 text-truncate"},[t._v(" "+t._s(t.playlist.name)+" ")]),e("OverflowMenu",{staticClass:"ml-auto"},[e("ContextMenuItem",{attrs:{icon:"edit",disabled:t.playlist.isReadOnly},on:{click:function(e){t.showEditModal=!0}}},[t._v(" Edit ")]),e("b-dropdown-divider"),e("ContextMenuItem",{attrs:{icon:"x",variant:"danger",disabled:t.playlist.isReadOnly},on:{click:function(e){return t.deletePlaylist()}}},[t._v(" Delete ")])],1)],1),e("div",{staticClass:"d-flex flex-wrap align-items-center"},[e("span",{staticClass:"text-nowrap"},[e("strong",[t._v(t._s(t.playlist.trackCount))]),t._v(" tracks ")]),e("span",{staticClass:"mx-1"},[t._v("•")]),e("strong",[t._v(t._s(t.formatDuration(t.playlist.duration)))]),t.playlist.isPublic?[e("span",{staticClass:"mx-1"},[t._v("•")]),e("span",{staticClass:"badge badge-secondary badge-pill"},[t._v(" Public ")])]:t._e()],2),t.playlist.comment?e("div",{staticClass:"mt-3"},[t._v(" "+t._s(t.playlist.comment)+" ")]):t._e(),e("div",{staticClass:"text-nowrap mt-3"},[e("b-button",{staticClass:"mr-2",attrs:{variant:"secondary",disabled:0===t.playlist.tracks.length},on:{click:t.playNow}},[e("Icon",{attrs:{icon:"play"}}),t._v(" Play ")],1),e("b-button",{attrs:{variant:"secondary",disabled:0===t.playlist.tracks.length},on:{click:t.shuffleNow}},[e("Icon",{attrs:{icon:"shuffle"}}),t._v(" Shuffle ")],1)],1),t.playlist.tracks.length>0?e("TrackList",{staticClass:"mt-3",attrs:{tracks:t.playlist.tracks},scopedSlots:t._u([{key:"context-menu",fn:function({index:a}){return[e("b-dropdown-divider"),e("ContextMenuItem",{attrs:{icon:"x",variant:"danger",disabled:t.playlist.isReadOnly},on:{click:function(e){return t.removeTrack(a)}}},[t._v(" Remove ")])]}}],null,!1,4075899818)}):e("EmptyIndicator"),e("EditModal",{attrs:{visible:t.showEditModal,item:t.playlist},on:{"update:visible":function(e){t.showEditModal=e},confirm:t.updatePlaylist},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Edit playlist ")]},proxy:!0},{key:"default",fn:function({item:a}){return[e("div",{staticClass:"form-group"},[e("label",[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.name,expression:"item.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.name},on:{input:function(e){e.target.composing||t.$set(a,"name",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("Comment")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:a.comment,expression:"item.comment"}],staticClass:"form-control",domProps:{value:a.comment},on:{input:function(e){e.target.composing||t.$set(a,"comment",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"mb-0"},[t._v("Public")]),e("SwitchInput",{model:{value:a.isPublic,callback:function(e){t.$set(a,"isPublic",e)},expression:"item.isPublic"}})],1)]}}])})]},proxy:!0}])})},io=[],no=(0,s.defineComponent)({components:{SwitchInput:se,TrackList:ii,EditModal:Nn},props:{id:{type:String,required:!0}},setup(){return{playlistStore:bt(),formatDuration:F}},data(){return{playlist:null,showEditModal:!1}},watch:{id:{immediate:!0,handler(t){this.playlist=null,this.$api.getPlaylist(t).then((t=>{this.playlist=t}))}}},methods:{playNow(){return this.$store.dispatch("player/playNow",{tracks:this.playlist.tracks})},shuffleNow(){return this.$store.dispatch("player/shuffleNow",{tracks:this.playlist.tracks})},removeTrack(t){return this.playlist.tracks.splice(t,1),this.playlistStore.removeTrack(this.id,t)},updatePlaylist(t){return this.playlist=t,this.playlistStore.update(this.playlist)},deletePlaylist(){return this.playlistStore.delete(this.id).then((()=>{this.$router.replace({name:"playlists"})}))}}}),oo=no,lo=(0,y.A)(oo,ro,io,!1,null,null,null),uo=lo.exports,co=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[e("ul",{staticClass:"nav-underlined"},[e("li",[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:null}}}},[t._v(" Recently added ")])],1),e("li",[e("router-link",{attrs:{to:{...t.$route,params:{...t.$route.params,sort:"a-z"}}}},[t._v(" A-Z ")])],1)]),e("b-button",{attrs:{variant:"link"},on:{click:function(e){t.showAddModal=!0}}},[e("Icon",{attrs:{icon:"plus"}})],1)],1),t.items.length>0?e("Tiles",{attrs:{square:""}},t._l(t.items,(function(a){return e("Tile",{key:a.id,attrs:{image:a.image,to:{name:"playlist",params:{id:a.id}},title:a.name},scopedSlots:t._u([{key:"text",fn:function(){return[e("strong",[t._v(t._s(a.trackCount))]),t._v(" tracks ")]},proxy:!0},{key:"context-menu",fn:function(){return[e("ContextMenuItem",{attrs:{icon:"play"},on:{click:function(e){return t.playNow(a.id)}}},[t._v(" Play ")]),e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:function(e){return t.playNext(a.id)}}},[t._v(" Play next ")]),e("ContextMenuItem",{attrs:{icon:"plus"},on:{click:function(e){return t.playLater(a.id)}}},[t._v(" Add to queue ")])]},proxy:!0}],null,!0)})})),1):e("EmptyIndicator"),e("CreatePlaylistModal",{attrs:{visible:t.showAddModal},on:{"update:visible":function(e){t.showAddModal=e}}})],1)},po=[],mo=(0,s.defineComponent)({components:{CreatePlaylistModal:wt},props:{sort:{type:String,default:null}},setup(t){const e=bt();return{showAddModal:(0,s.ref)(!1),loading:(0,s.computed)((()=>null===e.playlists)),items:(0,s.computed)((()=>"a-z"===t.sort?(0,gt.A)(e.playlists,"name"):(0,gt.A)(e.playlists,"createdAt","desc")))}},methods:{async playNow(t){const e=await this.$api.getPlaylist(t);return this.$store.dispatch("player/playTrackList",{tracks:e.tracks})},async playNext(t){const e=await this.$api.getPlaylist(t);return this.$store.dispatch("player/setNextInQueue",e.tracks)},async playLater(t){const e=await this.$api.getPlaylist(t);return this.$store.dispatch("player/addToQueue",e.tracks)}}}),ho=mo,fo=(0,y.A)(ho,co,po,!1,null,null,null),yo=fo.exports,vo=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ContentLoader",{attrs:{loading:null==t.result},scopedSlots:t._u([{key:"default",fn:function(){return[t.result.artists.length>0?e("div",{staticClass:"mb-5"},[e("h1",[t._v("Artists")]),e("ArtistList",{attrs:{items:t.result.artists}})],1):t._e(),t.result.albums.length>0?e("div",{staticClass:"mb-5"},[e("h1",[t._v("Albums")]),e("AlbumList",{attrs:{items:t.result.albums}})],1):t._e(),t.result.tracks.length>0?e("div",[e("h1",[t._v("Tracks")]),e("TrackList",{attrs:{tracks:t.result.tracks}})],1):t._e(),t.hasResult?t._e():e("EmptyIndicator",{attrs:{label:"No results"}})]},proxy:!0}])})},go=[],bo=(0,s.defineComponent)({components:{AlbumList:Ur,ArtistList:Kr,TrackList:ii},props:{query:{type:String,required:!0}},data(){return{result:null}},computed:{hasResult(){return this.result&&(this.result.artists.length>0||this.result.albums.length>0||this.result.tracks.length>0)}},watch:{query:{immediate:!0,handler(t){this.$api.search(t).then((t=>{this.result=t}))}}}}),ko=bo,_o=(0,y.A)(ko,vo,go,!1,null,null,null),xo=_o.exports,wo=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.items.length>0?e("TrackList",{attrs:{tracks:t.items}}):t._e(),e("InfiniteLoader",{attrs:{loading:t.loading,"has-more":t.hasMore},on:{"load-more":t.loadMore}})],1)},Co=[],Ao=(0,s.defineComponent)({components:{TrackList:ii},props:{id:{type:String,required:!0}},data(){return{loading:!1,hasMore:!0,items:[]}},computed:{generator(){return this.$api.getTracksByArtist(this.id)}},methods:{async loadMore(){this.loading=!0;const{value:t,done:e}=await this.generator.next();void 0!==t&&this.items.push(...t),this.hasMore=!e,this.loading=!1}}}),Po=Ao,Io=(0,y.A)(Po,wo,Co,!1,null,null,null),So=Io.exports,To=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t._m(0),e("ContentLoader",{attrs:{loading:null===t.item},scopedSlots:t._u([{key:"default",fn:function(){return[e("BaseTable",[e("BaseTableHead"),e("tbody",{staticClass:"text-break"},[t.path?e("tr",{on:{click:t.openParent}},[e("td",[e("Icon",{attrs:{icon:"folder"}})],1),e("td",{attrs:{colspan:"2"}},[t._v(" .. ")])]):t._e(),t._l(t.item.directories,(function(a){return e("tr",{key:a.id,on:{click:function(e){return t.openDirectory(a.id)}}},[e("td",[e("Icon",{attrs:{icon:"folder"}})],1),e("td",{attrs:{colspan:"2"}},[t._v(" "+t._s(a.name)+" ")])])})),t._l(t.item.tracks,(function(a){return e("tr",{key:a.id,class:{active:a.id===t.playingTrackId},on:{click:function(e){return t.playTrack(a)}}},[e("CellTrackNumber",{attrs:{active:a.id===t.playingTrackId&&t.isPlaying,value:a.track}}),e("CellTitle",{attrs:{track:a}}),e("CellActions",{attrs:{track:a}})],1)}))],2)],1)]},proxy:!0}])})],1)},$o=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[e("h1",{staticClass:"mb-0 mr-2 text-truncate"},[t._v(" Files ")])])}],Mo=(0,s.defineComponent)({components:{BaseTable:Hs,BaseTableHead:Xs,CellTrackNumber:ar,CellTitle:Cr,CellActions:$r},props:{path:{type:String,default:""}},data(){return{item:null}},computed:{isPlaying(){return this.$store.getters["player/isPlaying"]},playingTrackId(){return this.$store.getters["player/trackId"]}},watch:{path:{immediate:!0,async handler(t){this.item=null,this.item=await this.$api.getDirectory(t),this.item.tracks=(0,gt.A)(this.item.tracks,["track","title"]),this.item.directories=(0,gt.A)(this.item.directories,"name")}}},methods:{async playNow(){return this.$store.dispatch("player/playNow",{tracks:this.item.tracks})},async shuffleNow(){return this.$store.dispatch("player/shuffleNow",{tracks:this.item.tracks})},async playTrack(t){if(t.id===this.playingTrackId)return this.$store.dispatch("player/playPause");const e=this.item.tracks.findIndex((e=>e.id===t.id));return this.$store.dispatch("player/playTrackList",{index:e,tracks:this.item.tracks})},openDirectory(t){const e=""===this.path?t:[this.path,t].join("/");this.$router.push({path:`/files/${e}`})},openParent(){const t=this.path.split("/").slice(0,-1).join("/");this.$router.push({path:`/files/${t}`})}}}),Lo=Mo,qo=(0,y.A)(Lo,To,$o,!1,null,null,null),Ro=qo.exports;function No(t){const e=new i.Ay({mode:"history",linkExactActiveClass:"active",base:"/",routes:[{path:"/",name:"home",component:Hr},{name:"login",path:"/login",component:Es,props:t=>({returnTo:t.query.returnTo}),meta:{layout:"fullscreen"}},{name:"queue",path:"/queue",component:Rr},{name:"albums-default",path:"/albums",redirect:{name:"albums",params:{sort:"recently-added"}}},{name:"albums",path:"/albums/:sort",component:Hi,props:!0},{name:"album",path:"/albums/id/:id",component:Fi,props:!0},{name:"artists",path:"/artists/:sort?",component:Ri,props:!0},{name:"artist",path:"/artists/id/:id",component:Si,props:!0},{name:"artist-tracks",path:"/artists/id/:id/tracks",component:So,props:!0},{name:"genres",path:"/genres/:sort?",component:dn,props:!0},{name:"genre",path:"/genres/id/:id/:section?",component:rn,props:!0},{name:"favourites",path:"/favourites/:section?",component:In,props:!0},{name:"radio",path:"/radio",component:En},{name:"podcasts",path:"/podcasts/:sort?",component:so,props:!0},{name:"podcast",path:"/podcasts/id/:id",component:Vn,props:!0},{name:"files",path:"/files/:path*",component:Ro,props:!0},{name:"playlists",path:"/playlists/:sort?",component:yo,props:!0},{name:"playlist",path:"/playlist/:id",component:uo,props:!0},{name:"search",path:"/search",component:xo,props:t=>({query:t.query.q})}]});return e.beforeEach(((e,a,s)=>{"login"===e.name||t.isAuthenticated()?s():s({name:"login",query:{returnTo:e.fullPath}})})),e}var zo=a(5645);class Do{constructor(){(0,$.A)(this,"audio",new Audio),(0,$.A)(this,"handle",-1),(0,$.A)(this,"volume",1),(0,$.A)(this,"fadeDuration",200),(0,$.A)(this,"buffer",new Audio),(0,$.A)(this,"statsListener",null),(0,$.A)(this,"ontimeupdate",(()=>{})),(0,$.A)(this,"ondurationchange",(()=>{})),(0,$.A)(this,"onpause",(()=>{})),(0,$.A)(this,"onstreamtitlechange",(()=>{})),(0,$.A)(this,"onended",(()=>{})),(0,$.A)(this,"onerror",(()=>{}))}currentTime(){return this.audio.currentTime}duration(){return this.audio.duration}setBuffer(t){this.buffer.src=t}setVolume(t){this.cancelFade(),this.volume=t,this.audio.volume=t}setPlaybackRate(t){this.audio.playbackRate=t}async pause(){await this.fadeOut(),this.audio.pause()}async resume(){this.audio.volume=0,await this.audio.play(),this.fadeIn()}async seek(t){await this.fadeOut(this.fadeDuration/2),this.audio.volume=0,this.audio.currentTime=t,await this.fadeIn(this.fadeDuration/2)}async changeTrack(t){if(this.audio&&(this.cancelFade(),Bo(this.audio,this.fadeDuration)),this.audio=new Audio(t.url),this.audio.onerror=()=>{this.onerror(this.audio.error)},this.audio.onended=()=>{this.onended()},this.audio.ontimeupdate=()=>{this.ontimeupdate(this.audio.currentTime)},this.audio.ondurationchange=()=>{this.ondurationchange(this.audio.duration)},this.audio.onpause=()=>{this.onpause()},this.ondurationchange(this.audio.duration),this.ontimeupdate(this.audio.currentTime),this.onstreamtitlechange(null),this.audio.volume=0,this.audio.playbackRate=t.playbackRate??1,this.statsListener?.stop(),t.isStream&&(console.info("Icecast: starting stats listener"),this.statsListener=new zo.A(t.url,{sources:["icy"],onStats:t=>{void 0===t?.icy?(console.info("Icecast: no metadata found. Stopping"),this.statsListener?.stop()):t?.icy?.StreamTitle&&this.onstreamtitlechange(t?.icy?.StreamTitle)}}),this.statsListener?.start()),!0!==t.paused){try{await this.audio.play()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return void console.warn(e);throw e}this.fadeIn()}}cancelFade(){clearTimeout(this.handle)}fadeIn(t=this.fadeDuration){this.fadeFromTo(0,this.volume,t).then()}fadeOut(t=this.fadeDuration){return this.fadeFromTo(this.volume,0,t)}fadeFromTo(t,e,a){console.info(`AudioController: start fade (${t}, ${e}, ${a})`);const s=Date.now(),r=(e-t)/a;return a<=0&&(this.audio.volume=e),clearTimeout(this.handle),new Promise((i=>{const n=()=>{if(this.audio.volume===e)return console.info(`AudioController: fade result. duration: ${a}ms, actual: ${Date.now()-s}ms, volume: ${this.audio.volume}`),void i();const o=Date.now()-s;this.audio.volume=Fo(0,this.volume,t+o*r),this.handle=setTimeout(n,10)};n()}))}}function Bo(t,e){async function a(t,e,a,s){if(s<=0)return t.volume=a,t;const r=Date.now(),i=(a-e)/s;while(t.volume!==a){const a=Date.now()-r;t.volume=Fo(0,1,e+a*i),await Eo(10)}return t}console.info(`AudioController: ending payback for ${t}`),t.ontimeupdate=null,t.ondurationchange=null,t.onpause=null,t.onerror=null,t.onended=null,t.onloadedmetadata=null;const s=Date.now();a(t,t.volume,0,e).catch((t=>console.warn("Error during fade out: "+t.stack))).finally((()=>{t.pause(),console.info(`AudioController: ending payback done. actual ${Date.now()-s}ms`)}))}function Eo(t){return new Promise((e=>setTimeout(e,t)))}function Fo(t,e,a){return Math.max(t,Math.min(a,e))}localStorage.removeItem("player.mute"),localStorage.removeItem("queue"),localStorage.removeItem("queueIndex");const Oo=parseFloat(localStorage.getItem("player.volume")||"1.0"),Uo=parseFloat(localStorage.getItem("player.podcastPlaybackRate")||"1.0"),jo=navigator.mediaSession,Qo=new Do;function Vo(t){return{namespaced:!0,state:{queue:null,queueIndex:-1,scrobbled:!1,isPlaying:!1,duration:0,currentTime:0,streamTitle:null,repeat:"false"!==localStorage.getItem("player.repeat"),shuffle:"true"===localStorage.getItem("player.shuffle"),volume:Oo,podcastPlaybackRate:Uo},mutations:{setPlaying(t){t.isPlaying=!0,jo&&(jo.playbackState="playing")},setPaused(t){t.isPlaying=!1,jo&&(jo.playbackState="paused")},setRepeat(t,e){t.repeat=e,localStorage.setItem("player.repeat",e)},setShuffle(t,e){t.shuffle=e,localStorage.setItem("player.shuffle",e)},setQueue(t,e){t.queue=e,t.queueIndex=-1},setQueueIndex(t,e){if(!t.queue||0===t.queue.length)return t.queueIndex=-1,t.duration=0,void(jo&&(jo.metadata=null,jo.playbackState="none"));e=Math.max(0,e),e=e<t.queue.length?e:0,t.queueIndex=e,t.scrobbled=!1;const a=t.queue[e];t.duration=a.duration;const s=(e+1)%t.queue.length;Qo.setBuffer(t.queue[s].url),jo&&(jo.metadata=new MediaMetadata({title:a.title,artist:B(a.artists),album:a.album,artwork:a.image?[{src:a.image,sizes:"300x300"}]:void 0}))},addToQueue(t,e){t.queue?.push(...e)},removeFromQueue(t,e){t.queue?.splice(e,1),e<t.queueIndex&&t.queueIndex--},shuffleQueue(t){t.queue&&t.queue.length>0&&(t.queue=N(t.queue,t.queueIndex),t.queueIndex=0)},setNextInQueue(t,e){t.queue?.splice(t.queueIndex+1,0,...e)},setCurrentTime(t,e){t.currentTime=e},setDuration(t,e){isFinite(e)&&(t.duration=e)},setStreamTitle(t,e){t.streamTitle=e,e&&jo?.metadata&&(jo.metadata.title=e)},setScrobbled(t){t.scrobbled=!0},setVolume(t,e){t.volume=e,localStorage.setItem("player.volume",String(e))},setPodcastPlaybackRate(t,e){t.podcastPlaybackRate=e,localStorage.setItem("player.podcastPlaybackRate",String(e))}},actions:{async playNow({commit:t,dispatch:e},{tracks:a}){t("setShuffle",!1),e("playTrackList",{tracks:a,index:0})},async shuffleNow({commit:t,dispatch:e},{tracks:a}){t("setShuffle",!0),e("playTrackList",{tracks:a})},async playTrackListIndex({commit:t,getters:e},{index:a}){t("setQueueIndex",a),t("setPlaying"),await Qo.changeTrack({...e.track,playbackRate:e.playbackRate})},async playTrackList({commit:t,state:e,getters:a},{tracks:s,index:r}){null==r&&(r=e.shuffle?Math.floor(Math.random()*s.length):0),e.shuffle&&(s=[...s],R(s,r),r=0),D(e.queue||[],s)||t("setQueue",s),t("setQueueIndex",r),t("setPlaying"),await Qo.changeTrack({...a.track,playbackRate:a.playbackRate})},async resume({commit:t}){t("setPlaying"),await Qo.resume()},async pause({commit:t}){Qo.pause(),t("setPaused")},async playPause({state:t,dispatch:e}){return t.isPlaying?e("pause"):e("resume")},async next({commit:t,state:e,getters:a}){t("setQueueIndex",e.queueIndex+1),t("setPlaying"),await Qo.changeTrack({...a.track,playbackRate:a.playbackRate})},async previous({commit:t,state:e,getters:a}){t("setQueueIndex",Qo.currentTime()>3?e.queueIndex:e.queueIndex-1),t("setPlaying"),await Qo.changeTrack(a.track)},seek({state:t},e){isFinite(t.duration)&&Qo.seek(t.duration*e)},async loadQueue({commit:e,getters:a}){const{tracks:s,currentTrack:r,currentTrackPosition:i}=await t.getPlayQueue();e("setQueue",s),e("setQueueIndex",r),e("setPaused"),await Qo.changeTrack({...a.track,paused:!0,playbackRate:a.playbackRate}),await Qo.seek(i)},async resetQueue({commit:t,getters:e}){t("setQueueIndex",0),t("setPaused"),await Qo.changeTrack({...e.track,paused:!0,playbackRate:e.playbackRate})},async clearQueue({state:t,commit:e}){t.queue&&(t.queue.length>1?(e("setQueue",[t.queue[t.queueIndex]]),e("setQueueIndex",0)):(e("setQueue",[]),e("setQueueIndex",-1),e("setPaused"),await Qo.changeTrack({})))},toggleRepeat({commit:t,state:e}){t("setRepeat",!e.repeat)},toggleShuffle({commit:t,state:e}){t("setShuffle",!e.shuffle)},setShuffle({commit:t},e){t("setShuffle",e)},addToQueue({state:t,commit:e},a){e("addToQueue",t.shuffle?N(a):a)},setNextInQueue({state:t,commit:e},a){e("setNextInQueue",t.shuffle?N(a):a)},setVolume({commit:t},e){Qo.setVolume(e),t("setVolume",e)},setPlaybackRate({commit:t,getters:e},a){t("setPodcastPlaybackRate",a),e.track?.isPodcast&&Qo.setPlaybackRate(a)}},getters:{track(t){return t.queue&&-1!==t.queueIndex?t.queue[t.queueIndex]:null},trackId(t,e){return e.track?e.track.id:-1},isPlaying(t){return t.isPlaying},progress(t){return t.currentTime>-1&&t.duration>0?t.currentTime/t.duration:0},hasNext(t){return t.queue&&t.queueIndex<t.queue.length-1},hasPrevious(t){return t.queueIndex>0},playbackRate(t,e){return e.track?.isPodcast?t.podcastPlaybackRate:1}}}}function Ho(t,e){const a=new r.Ay.Store({strict:!0,modules:{player:{namespaced:!0,...Vo(e)}}});return Go(a,t,e),a}function Go(t,e,a){Qo.ontimeupdate=e=>{t.commit("player/setCurrentTime",e)},Qo.ondurationchange=e=>{t.commit("player/setDuration",e)},Qo.onended=()=>t.getters["player/hasNext"]||t.state.player.repeat?t.dispatch("player/next"):t.dispatch("player/resetQueue"),Qo.onpause=()=>{t.commit("player/setPaused")},Qo.onstreamtitlechange=e=>{t.commit("player/setStreamTitle",e)},Qo.onerror=a=>{t.commit("player/setPaused"),e.setError(a)},Qo.setVolume(Oo);const r=t.getters["player/track"];if(r?.url&&Qo.changeTrack({...r,paused:!0}),Qo.setPlaybackRate(t.getters["player/playbackRate"]),jo){jo.setActionHandler("play",(()=>{t.dispatch("player/resume")})),jo.setActionHandler("pause",(()=>{t.dispatch("player/pause")})),jo.setActionHandler("nexttrack",(()=>{t.dispatch("player/next")})),jo.setActionHandler("previoustrack",(()=>{t.dispatch("player/previous")})),jo.setActionHandler("stop",(()=>{t.dispatch("player/pause")})),jo.setActionHandler("seekto",(t=>{t.seekTime&&Qo.seek(t.seekTime)})),jo.setActionHandler("seekforward",(t=>{const e=t.seekOffset||10;Qo.seek(Math.min(Qo.currentTime()+e,Qo.duration()))})),jo.setActionHandler("seekbackward",(t=>{const e=t.seekOffset||10;Qo.seek(Math.max(Qo.currentTime()-e,0))})),t.watch(((t,e)=>e["player/trackId"]),(()=>{const e=t.getters["player/track"];if(e&&!e.isStream)return a.updateNowPlaying(e.id)})),t.watch((t=>t.player.currentTime),(()=>{if(t.getters["player/track"]&&!1===t.state.player.scrobbled&&t.state.player.duration>30&&t.state.player.currentTime/t.state.player.duration>.7){const{id:e,isStream:s}=t.getters["player/track"];if(!s)return t.commit("player/setScrobbled"),a.scrobble(e)}}));const e=1e4,r=(0,s.ref)(Date.now());t.watch((t=>[t.player.queue,t.player.queueIndex]),((e,[s])=>{if(null!==s){r.value=Date.now();const{queue:e,currentTime:s}=t.state.player;return a.savePlayQueue(e,t.getters["player/track"],s)}})),t.watch((t=>[t.player.currentTime]),(()=>{const s=Date.now(),i=s-r.value;if(i>=e){r.value=s;const{queue:e,currentTime:i}=t.state.player;return a.savePlayQueue(e,t.getters["player/track"],i)}}))}}s["default"].use(r.Ay),s["default"].use(i.Ay),s["default"].use(c.R2);const Yo=Z(),Zo=wn(Yo),Wo=No(Yo),Xo=(0,c.Ey)().use((({store:t})=>{t.api=(0,s.markRaw)(Zo)})),Jo=p(Xo),Ko=Ho(Jo,Zo);(0,s.watch)((()=>Jo.isLoggedIn),(t=>{if(t)return Promise.all([Gt().load(),bt().load(),Ko.dispatch("player/loadQueue")])})),Wo.beforeEach(((t,e,a)=>{Jo.clearError(),a()}));const tl=_e(ke,{router:Wo,pinia:Xo,store:Ko});tl.config.errorHandler=t=>{console.error(t),Jo.setError(t)},tl.use(Yo),tl.use(Zo),Object.entries(Ls).forEach((([t,e])=>{tl.component(t,e)})),tl.mount("#app")},6910:function(t,e,a){t.exports=a.p+"img/fallback.3e5b361d.svg"},6373:function(t,e,a){t.exports=a.p+"img/gizmolab-logo-small.2c80e133.png"}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,r,i){if(!s){var n=1/0;for(c=0;c<t.length;c++){s=t[c][0],r=t[c][1],i=t[c][2];for(var o=!0,l=0;l<s.length;l++)(!1&i||n>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,i<n&&(n=i));if(o){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[s,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,i,n=s[0],o=s[1],l=s[2],u=0;if(n.some((function(e){return 0!==t[e]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(l)var c=l(a)}for(e&&e(s);u<n.length;u++)i=n[u],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(c)},s=self["webpackChunkairsonic_refix"]=self["webpackChunkairsonic_refix"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(8029)}));s=a.O(s)})();
//# sourceMappingURL=app.9cdff4de.js.map